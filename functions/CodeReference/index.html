
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Transportation Technology Total Cost of Ownership">
      
      
        <meta name="author" content="Harish Panneer Selvam">
      
      
      
      
      
      <link rel="icon" href="../../t3co_logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Table of Contents - T3CO</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#table-of-contents" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="T3CO" class="md-header__button md-logo" aria-label="T3CO" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            T3CO
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Table of Contents
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/NREL/T3CO" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="T3CO" class="md-nav__button md-logo" aria-label="T3CO" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    T3CO
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/NREL/T3CO" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick_start/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../T3CO_Overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Inputs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Inputs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vehicle_inputs_descriptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vehicle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scenario_inputs_descriptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scenario
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../config_inputs_descriptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Config
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Results
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Results
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../t3co_outputs_descriptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Outputs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Code Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Code Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CodeFlow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CodeFlow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    T3CO Modules
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            T3CO Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sweep/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sweep
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2_2" id="__nav_7_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Run Modules
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2_2">
            <span class="md-nav__icon md-icon"></span>
            Run Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../run_scenario/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run Scenario
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generateinputs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate Inputs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Global/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Global Variables
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2_3" >
        
          
          <label class="md-nav__link" for="__nav_7_2_3" id="__nav_7_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    TCO Modules
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2_3">
            <span class="md-nav__icon md-icon"></span>
            TCO Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../opportunity_cost/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Opportunity Costs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tcocalc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TCO Calculations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tco_analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TCO Analysis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tco_stock_emissions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TCO Stock and Emissions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2_4" >
        
          
          <label class="md-nav__link" for="__nav_7_2_4" id="__nav_7_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Multi Objective Optimization Module
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2_4">
            <span class="md-nav__icon md-icon"></span>
            Multi Objective Optimization Module
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../moo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MOO
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2_5" >
        
          
          <label class="md-nav__link" for="__nav_7_2_5" id="__nav_7_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Objectives Modules
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2_5">
            <span class="md-nav__icon md-icon"></span>
            Objectives Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../accel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Acceleration Test
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gradeability/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gradeability Test
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fueleconomy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fuel Economy
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2_6" >
        
          
          <label class="md-nav__link" for="__nav_7_2_6" id="__nav_7_2_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Visualization Module
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2_6">
            <span class="md-nav__icon md-icon"></span>
            Visualization Module
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../charts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Charts
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  
    
      
    
    <a href="https://github.com/NREL/T3CO/tree/main/docs/functions/CodeReference.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5"/></svg>
    </a>
  


<h1 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="#t3co">t3co</a></li>
<li><a href="#t3co.visualization.charts">t3co.visualization.charts</a></li>
<li><a href="#t3co.visualization.charts.T3COCharts">T3COCharts</a><ul>
<li><a href="#t3co.visualization.charts.T3COCharts.__init__">__init__</a></li>
<li><a href="#t3co.visualization.charts.T3COCharts.from_file">from_file</a></li>
<li><a href="#t3co.visualization.charts.T3COCharts.from_df">from_df</a></li>
<li><a href="#t3co.visualization.charts.T3COCharts.to_df">to_df</a></li>
<li><a href="#t3co.visualization.charts.T3COCharts.parse_scenario_name">parse_scenario_name</a></li>
<li><a href="#t3co.visualization.charts.T3COCharts.generate_tco_plots">generate_tco_plots</a></li>
<li><a href="#t3co.visualization.charts.T3COCharts.generate_violin_plot">generate_violin_plot</a></li>
<li><a href="#t3co.visualization.charts.T3COCharts.generate_histogram">generate_histogram</a></li>
</ul>
</li>
<li><a href="#t3co.visualization">t3co.visualization</a></li>
<li><a href="#t3co.tco">t3co.tco</a></li>
<li><a href="#t3co.tco.tcocalc">t3co.tco.tcocalc</a></li>
<li><a href="#t3co.tco.tcocalc.find_residual_rates">find_residual_rates</a></li>
<li><a href="#t3co.tco.tcocalc.calculate_dollar_cost">calculate_dollar_cost</a></li>
<li><a href="#t3co.tco.tcocalc.calculate_opp_costs">calculate_opp_costs</a></li>
<li><a href="#t3co.tco.tcocalc.fill_fuel_eff_file">fill_fuel_eff_file</a></li>
<li><a href="#t3co.tco.tcocalc.fill_veh_expense_file">fill_veh_expense_file</a></li>
<li><a href="#t3co.tco.tcocalc.fill_trav_exp_tsv">fill_trav_exp_tsv</a></li>
<li><a href="#t3co.tco.tcocalc.fill_downtimelabor_cost_tsv">fill_downtimelabor_cost_tsv</a></li>
<li><a href="#t3co.tco.tcocalc.fill_market_share_tsv">fill_market_share_tsv</a></li>
<li><a href="#t3co.tco.tcocalc.fill_fuel_expense_tsv">fill_fuel_expense_tsv</a></li>
<li><a href="#t3co.tco.tcocalc.fill_annual_tsv">fill_annual_tsv</a></li>
<li><a href="#t3co.tco.tcocalc.fill_reg_sales_tsv">fill_reg_sales_tsv</a></li>
<li><a href="#t3co.tco.tcocalc.fill_insurance_tsv">fill_insurance_tsv</a></li>
<li><a href="#t3co.tco.tcocalc.fill_residual_cost_tsc">fill_residual_cost_tsc</a></li>
<li><a href="#t3co.tco.tcocalc.fill_survival_tsv">fill_survival_tsv</a></li>
<li><a href="#t3co.tco.tcocalc.fill_fuel_split_tsv">fill_fuel_split_tsv</a></li>
<li><a href="#t3co.tco.opportunity_cost">t3co.tco.opportunity_cost</a></li>
<li><a href="#t3co.tco.opportunity_cost.OpportunityCost">OpportunityCost</a><ul>
<li><a href="#t3co.tco.opportunity_cost.OpportunityCost.__init__">__init__</a></li>
<li><a href="#t3co.tco.opportunity_cost.OpportunityCost.set_kdes">set_kdes</a></li>
<li><a href="#t3co.tco.opportunity_cost.OpportunityCost.set_payload_loss_factor">set_payload_loss_factor</a></li>
<li><a href="#t3co.tco.opportunity_cost.OpportunityCost.set_fueling_dwell_time_cost">set_fueling_dwell_time_cost</a></li>
<li><a href="#t3co.tco.opportunity_cost.OpportunityCost.set_M_R_downtime_cost">set_M_R_downtime_cost</a></li>
</ul>
</li>
<li><a href="#t3co.tco.opportunity_cost.main">main</a></li>
<li><a href="#t3co.tco.tco_stock_emissions">t3co.tco.tco_stock_emissions</a></li>
<li><a href="#t3co.tco.tco_stock_emissions.dropCols">dropCols</a></li>
<li><a href="#t3co.tco.tco_stock_emissions.stockModel">stockModel</a></li>
<li><a href="#t3co.tco.tco_analysis">t3co.tco.tco_analysis</a></li>
<li><a href="#t3co.tco.tco_analysis.get_operating_costs">get_operating_costs</a></li>
<li><a href="#t3co.tco.tco_analysis.discounted_costs">discounted_costs</a></li>
<li><a href="#t3co.tco.tco_analysis.calc_discountedTCO">calc_discountedTCO</a></li>
<li><a href="#t3co.tco.tco_analysis.get_tco_of_vehicle">get_tco_of_vehicle</a></li>
<li><a href="#t3co.tests.test_tcos">t3co.tests.test_tcos</a></li>
<li><a href="#t3co.tests.test_tcos.remove">remove</a></li>
<li><a href="#t3co.tests.test_tcos.RunCONVTCOTests">RunCONVTCOTests</a><ul>
<li><a href="#t3co.tests.test_tcos.RunCONVTCOTests.compare">compare</a></li>
</ul>
</li>
<li><a href="#t3co.tests">t3co.tests</a></li>
<li><a href="#t3co.tests.tco_tests.t2co_tco_benchmark">t3co.tests.tco_tests.t2co_tco_benchmark</a></li>
<li><a href="#t3co.tests.tco_tests.t2co_tco_benchmark.veh_no">veh_no</a></li>
<li><a href="#t3co.tests.tco_tests.t2co_bev_mpgge_benchmark">t3co.tests.tco_tests.t2co_bev_mpgge_benchmark</a></li>
<li><a href="#t3co.tests.tco_tests.t2co_bev_mpgge_benchmark.veh_no">veh_no</a></li>
<li><a href="#t3co.tests.test_moo">t3co.tests.test_moo</a></li>
<li><a href="#t3co.moopack">t3co.moopack</a></li>
<li><a href="#t3co.moopack.moo">t3co.moopack.moo</a></li>
<li><a href="#t3co.moopack.moo.T3COProblem">T3COProblem</a><ul>
<li><a href="#t3co.moopack.moo.T3COProblem.setup_opt_records">setup_opt_records</a></li>
<li><a href="#t3co.moopack.moo.T3COProblem.__init__">__init__</a></li>
<li><a href="#t3co.moopack.moo.T3COProblem.compile_reporting_vars">compile_reporting_vars</a></li>
<li><a href="#t3co.moopack.moo.T3COProblem.instantiate_moo_vehicles_and_scenario">instantiate_moo_vehicles_and_scenario</a></li>
<li><a href="#t3co.moopack.moo.T3COProblem.cda_percent_delta_knob">cda_percent_delta_knob</a></li>
<li><a href="#t3co.moopack.moo.T3COProblem.weight_delta_percent_knob">weight_delta_percent_knob</a></li>
<li><a href="#t3co.moopack.moo.T3COProblem.fc_peak_eff_knob">fc_peak_eff_knob</a></li>
<li><a href="#t3co.moopack.moo.T3COProblem.get_objs">get_objs</a></li>
<li><a href="#t3co.moopack.moo.T3COProblem.adjust_fc_peak_eff">adjust_fc_peak_eff</a></li>
<li><a href="#t3co.moopack.moo.T3COProblem.sweep_knob">sweep_knob</a></li>
<li><a href="#t3co.moopack.moo.T3COProblem.get_tco_from_moo_advanced_result">get_tco_from_moo_advanced_result</a></li>
</ul>
</li>
<li><a href="#t3co.moopack.moo.T3CODisplay">T3CODisplay</a><ul>
<li><a href="#t3co.moopack.moo.T3CODisplay.__init__">__init__</a></li>
</ul>
</li>
<li><a href="#t3co.moopack.moo.run_optimization">run_optimization</a></li>
<li><a href="#t3co.objectives.accel">t3co.objectives.accel</a></li>
<li><a href="#t3co.objectives.accel.get_accel">get_accel</a></li>
<li><a href="#t3co.objectives.fueleconomy">t3co.objectives.fueleconomy</a></li>
<li><a href="#t3co.objectives.fueleconomy.get_range_mi">get_range_mi</a></li>
<li><a href="#t3co.objectives.fueleconomy.get_sim_drive">get_sim_drive</a></li>
<li><a href="#t3co.objectives.fueleconomy.get_mpgge">get_mpgge</a></li>
<li><a href="#t3co.objectives.gradeability">t3co.objectives.gradeability</a></li>
<li><a href="#t3co.objectives.gradeability.get_gradeability">get_gradeability</a></li>
<li><a href="#t3co.objectives">t3co.objectives</a></li>
<li><a href="#t3co.utilities.demo_inputs_installer">t3co.utilities.demo_inputs_installer</a></li>
<li><a href="#t3co.utilities.demo_inputs_installer.main">main</a></li>
<li><a href="#t3co.utilities.demo_inputs_installer.copy_demo_input_files">copy_demo_input_files</a></li>
<li><a href="#t3co.sweep">t3co.sweep</a></li>
<li><a href="#t3co.sweep.deug_traces">deug_traces</a></li>
<li><a href="#t3co.sweep.save_tco_files">save_tco_files</a></li>
<li><a href="#t3co.sweep.get_knobs_bounds_curves">get_knobs_bounds_curves</a></li>
<li><a href="#t3co.sweep.get_objectives_constraints">get_objectives_constraints</a></li>
<li><a href="#t3co.sweep.run_moo">run_moo</a></li>
<li><a href="#t3co.sweep.check_input_files">check_input_files</a></li>
<li><a href="#t3co.sweep.skip_scenario">skip_scenario</a></li>
<li><a href="#t3co.sweep.optimize">optimize</a></li>
<li><a href="#t3co.sweep.run_vehicle_scenarios">run_vehicle_scenarios</a></li>
<li><a href="#t3co.sweep.run_optimize_analysis">run_optimize_analysis</a></li>
<li><a href="#t3co.run.Global">t3co.run.Global</a></li>
<li><a href="#t3co.run.Global.DieselGalPerGasGal">DieselGalPerGasGal</a></li>
<li><a href="#t3co.run.Global.kgH2_per_gge">kgH2_per_gge</a></li>
<li><a href="#t3co.run.Global.mps_to_mph">mps_to_mph</a></li>
<li><a href="#t3co.run.Global.m_to_mi">m_to_mi</a></li>
<li><a href="#t3co.run.Global.get_kwh_per_gge">get_kwh_per_gge</a></li>
<li><a href="#t3co.run.Global.set_tco_intermediates">set_tco_intermediates</a></li>
<li><a href="#t3co.run.Global.set_tco_results">set_tco_results</a></li>
<li><a href="#t3co.run.Global.kg_to_lbs">kg_to_lbs</a></li>
<li><a href="#t3co.run.Global.lbs_to_kgs">lbs_to_kgs</a></li>
<li><a href="#t3co.run.Global.not_falsy">not_falsy</a></li>
<li><a href="#t3co.run">t3co.run</a></li>
<li><a href="#t3co.run.generateinputs">t3co.run.generateinputs</a></li>
<li><a href="#t3co.run.generateinputs.generate">generate</a></li>
<li><a href="#t3co.run.run_scenario">t3co.run.run_scenario</a></li>
<li><a href="#t3co.run.run_scenario.Config">Config</a><ul>
<li><a href="#t3co.run.run_scenario.Config.from_file">from_file</a></li>
<li><a href="#t3co.run.run_scenario.Config.from_dict">from_dict</a></li>
<li><a href="#t3co.run.run_scenario.Config.validate_analysis_id">validate_analysis_id</a></li>
<li><a href="#t3co.run.run_scenario.Config.check_drivecycles_and_create_selections">check_drivecycles_and_create_selections</a></li>
</ul>
</li>
<li><a href="#t3co.run.run_scenario.Scenario">Scenario</a><ul>
<li><a href="#t3co.run.run_scenario.Scenario.originalcargo_kg">originalcargo_kg</a></li>
<li><a href="#t3co.run.run_scenario.Scenario.plf_scenario_vehicle_cargo_capacity_kg">plf_scenario_vehicle_cargo_capacity_kg</a></li>
<li><a href="#t3co.run.run_scenario.Scenario.from_config">from_config</a></li>
</ul>
</li>
<li><a href="#t3co.run.run_scenario.check_phev_init_socs">check_phev_init_socs</a></li>
<li><a href="#t3co.run.run_scenario.get_phev_util_factor">get_phev_util_factor</a></li>
<li><a href="#t3co.run.run_scenario.get_objective_simdrive">get_objective_simdrive</a></li>
<li><a href="#t3co.run.run_scenario.run_grade_or_accel">run_grade_or_accel</a></li>
<li><a href="#t3co.run.run_scenario.create_fastsim_vehicle">create_fastsim_vehicle</a></li>
<li><a href="#t3co.run.run_scenario.get_vehicle">get_vehicle</a></li>
<li><a href="#t3co.run.run_scenario.get_scenario_and_cycle">get_scenario_and_cycle</a></li>
<li><a href="#t3co.run.run_scenario.load_scenario">load_scenario</a></li>
<li><a href="#t3co.run.run_scenario.load_design_cycle_from_scenario">load_design_cycle_from_scenario</a></li>
<li><a href="#t3co.run.run_scenario.load_design_cycle_from_path">load_design_cycle_from_path</a></li>
<li><a href="#t3co.run.run_scenario.set_test_weight">set_test_weight</a></li>
<li><a href="#t3co.run.run_scenario.reset_vehicle_weight">reset_vehicle_weight</a></li>
<li><a href="#t3co.run.run_scenario.limit_cargo_kg_for_moo_hev_bev">limit_cargo_kg_for_moo_hev_bev</a></li>
<li><a href="#t3co.run.run_scenario.set_max_motor_kw">set_max_motor_kw</a></li>
<li><a href="#t3co.run.run_scenario.set_max_battery_kwh">set_max_battery_kwh</a></li>
<li><a href="#t3co.run.run_scenario.set_max_battery_power_kw">set_max_battery_power_kw</a></li>
<li><a href="#t3co.run.run_scenario.set_max_fuel_converter_kw">set_max_fuel_converter_kw</a></li>
<li><a href="#t3co.run.run_scenario.set_fuel_store_kwh">set_fuel_store_kwh</a></li>
<li><a href="#t3co.run.run_scenario.set_cargo_kg">set_cargo_kg</a></li>
<li><a href="#t3co.run.run_scenario.vehicle_scenario_sweep">vehicle_scenario_sweep</a></li>
<li><a href="#t3co.run.run_scenario.run">run</a></li>
<li><a href="#t3co.run.run_scenario.rerun">rerun</a></li>
<li><a href="#t3co.demos.opp_cost_demo">t3co.demos.opp_cost_demo</a></li>
<li><a href="#t3co.demos.hev_sweep_and_moo">t3co.demos.hev_sweep_and_moo</a></li>
<li><a href="#t3co.demos.hev_sweep_and_moo.vnum">vnum</a></li>
<li><a href="#t3co.demos.example_load_and_run">t3co.demos.example_load_and_run</a></li>
<li><a href="#t3co.demos.t2co_opt_benchmark">t3co.demos.t2co_opt_benchmark</a></li>
<li><a href="#t3co.demos.visualization_demo">t3co.demos.visualization_demo</a></li>
<li><a href="#t3co.demos.Spencer">t3co.demos.Spencer</a></li>
</ul>
<p><a id="t3co"></a></p>
<h1 id="t3co">t3co<a class="headerlink" href="#t3co" title="Permanent link">&para;</a></h1>
<p><a id="t3co.visualization.charts"></a></p>
<h1 id="t3covisualizationcharts">t3co.visualization.charts<a class="headerlink" href="#t3covisualizationcharts" title="Permanent link">&para;</a></h1>
<p><a id="t3co.visualization.charts.T3COCharts"></a></p>
<h2 id="t3cocharts-objects">T3COCharts Objects<a class="headerlink" href="#t3cocharts-objects" title="Permanent link">&para;</a></h2>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">class</span> <span class="nc">T3COCharts</span><span class="p">()</span>
</span></code></pre></div>
<p>This class takes T3CO output CSV file as input and generates different plots to gain insights from T3CO Results</p>
<p><a id="t3co.visualization.charts.T3COCharts.__init__"></a></p>
<h4 id="__init__">__init__<a class="headerlink" href="#__init__" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    <span class="n">results_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>    <span class="n">results_guide</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parents</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="s2">&quot;resources&quot;</span> <span class="o">/</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>    <span class="s2">&quot;visualization&quot;</span> <span class="o">/</span> <span class="s2">&quot;t3co_outputs_guide.csv&quot;</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This constructor initializes the T3COCharts object either from a dataframe or a CSV file path.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>filename</code> <em>str, optional</em> - Filepath to T3CO Results CSV File. Defaults to None.</li>
<li><code>results_df</code> <em>pd.DataFrame, optional</em> - Input pandas dataframe containing T3CO Results. Defaults to None.</li>
<li><code>results_guide</code> <em>str | Path, optional</em> - File path to t3co_outputs_guide.csv file that contains useful parameter descriptions and axis labels. Defaults to Path(<strong>file</strong>).parents[1]/"resources"/"visualization"/"t3co_outputs_guide.csv".</li>
</ul>
<p><a id="t3co.visualization.charts.T3COCharts.from_file"></a></p>
<h4 id="from_file">from_file<a class="headerlink" href="#from_file" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">def</span> <span class="nf">from_file</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This method reads a T3CO Results CSV file into a dataframe</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>filename</code> <em>str | Path, optional</em> - Path to T3CO Results CSV File. Defaults to None.</li>
</ul>
<p><a id="t3co.visualization.charts.T3COCharts.from_df"></a></p>
<h4 id="from_df">from_df<a class="headerlink" href="#from_df" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">def</span> <span class="nf">from_df</span><span class="p">(</span><span class="n">results_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This method reads t3co_results from a dataframe</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>results_df</code> <em>pd.DataFrame</em> - Input T3CO Results dataframe</li>
</ul>
<p><a id="t3co.visualization.charts.T3COCharts.to_df"></a></p>
<h4 id="to_df">to_df<a class="headerlink" href="#to_df" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">def</span> <span class="nf">to_df</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</span></code></pre></div>
<p>This returns the self.t3co_results member</p>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>pd.DataFrame</code> - T3CO Results dataframe</li>
</ul>
<p><a id="t3co.visualization.charts.T3COCharts.parse_scenario_name"></a></p>
<h4 id="parse_scenario_name">parse_scenario_name<a class="headerlink" href="#parse_scenario_name" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">def</span> <span class="nf">parse_scenario_name</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This method parses 'scenario_name' into 'vehicle_type', 'tech_progress', and 'vehicle_fuel_type' and uses 'scenario_gvwr_kg' to create 'vehicle_weight_class'</p>
<p><a id="t3co.visualization.charts.T3COCharts.generate_tco_plots"></a></p>
<h4 id="generate_tco_plots">generate_tco_plots<a class="headerlink" href="#generate_tco_plots" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">def</span> <span class="nf">generate_tco_plots</span><span class="p">(</span><span class="n">x_group_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>                       <span class="n">y_group_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>                       <span class="n">subplot_group_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;vehicle_fuel_type&quot;</span><span class="p">,</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>                       <span class="n">fig_x_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>                       <span class="n">fig_y_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>                       <span class="n">bar_width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">,</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>                       <span class="n">legend_pos</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.25</span><span class="p">,</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>                       <span class="n">edgecolor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">Figure</span>
</span></code></pre></div>
<p>This method generates a TCO Breakdown plot based on input arguments.
If x_group_col and/or y_group_col are provided, then a matrix/grid of subplots are generated within the same figure based on row- and column-wise groupings</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>x_group_col</code> <em>str</em> - T3CO Results parameter name to group on x-axis, i.e., grouping criteria for columns in subplots grid</li>
<li><code>y_group_col</code> <em>str</em> - T3CO Results parameter name to group on y-axis, i.e., grouping criteria for rows in subplots grid</li>
<li><code>subplot_group_col</code> <em>str, optional</em> - T3CO Results parameter to display within each subplots cell. Defaults to "vehicle_fuel_type".</li>
<li><code>fig_x_size</code> <em>int, optional</em> - Figure width relative to each bar on x-axis within subplot. Defaults to 8.</li>
<li><code>fig_y_size</code> <em>int, optional</em> - Figure height relative to each subplot cell. Defaults to 8.</li>
<li><code>bar_width</code> <em>float, optional</em> - Relative width of bars based on available width. Takes values between 0.0 and 1.0. Defaults to 0.8.</li>
<li><code>legend_pos</code> <em>float, optional</em> - Relative position of legend on the right side of plots. Takes values between 0.0 and 1.0. Defaults to 0.25.</li>
<li><code>edgecolor</code> <em>str, optional</em> - Edge color to distinguish cost elements in the stacked bars. Defaults to "none".</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>matplotlib.figure.Figure</code> - TCO Breakdown Figure object</li>
</ul>
<p><a id="t3co.visualization.charts.T3COCharts.generate_violin_plot"></a></p>
<h4 id="generate_violin_plot">generate_violin_plot<a class="headerlink" href="#generate_violin_plot" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">def</span> <span class="nf">generate_violin_plot</span><span class="p">(</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>        <span class="n">x_group_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>        <span class="n">y_group_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;discounted_tco_dol&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">Figure</span>
</span></code></pre></div>
<p>This method generates a violin plot based on x-axis group column and y-axis column name.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>x_group_col</code> <em>str</em> - T3CO Results parameter to group by on x-axis inside violinplot</li>
<li><code>y_group_col</code> <em>str, optional</em> - T3CO Results parameter to plot on y-axis. Defaults to "discounted_tco_dol".</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>matplotlib.figure.Figure</code> - Violin Plot Figure object</li>
</ul>
<p><a id="t3co.visualization.charts.T3COCharts.generate_histogram"></a></p>
<h4 id="generate_histogram">generate_histogram<a class="headerlink" href="#generate_histogram" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">def</span> <span class="nf">generate_histogram</span><span class="p">(</span><span class="n">hist_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>                       <span class="n">n_bins</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>                       <span class="n">show_pct</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">Figure</span>
</span></code></pre></div>
<p>This method generates a histogram plot based on inputs hist_col and n_bins</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>hist_col</code> <em>str</em> - T3CO column name to plot histogram</li>
<li><code>n_bins</code> <em>int</em> - Number of bins in histogram</li>
<li><code>show_pct</code> <em>bool, optional</em> - If True, plots percentage on y-axis instead of number of items. Defaults to False.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>matplotlib.figure.Figure</code> - Histogram figure object</li>
</ul>
<p><a id="t3co.visualization"></a></p>
<h1 id="t3covisualization">t3co.visualization<a class="headerlink" href="#t3covisualization" title="Permanent link">&para;</a></h1>
<p><a id="t3co.tco"></a></p>
<h1 id="t3cotco">t3co.tco<a class="headerlink" href="#t3cotco" title="Permanent link">&para;</a></h1>
<p><a id="t3co.tco.tcocalc"></a></p>
<h1 id="t3cotcotcocalc">t3co.tco.tcocalc<a class="headerlink" href="#t3cotcotcocalc" title="Permanent link">&para;</a></h1>
<p><a id="t3co.tco.tcocalc.find_residual_rates"></a></p>
<h4 id="find_residual_rates">find_residual_rates<a class="headerlink" href="#find_residual_rates" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="k">def</span> <span class="nf">find_residual_rates</span><span class="p">(</span><span class="n">vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>                        <span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span>
</span></code></pre></div>
<p>This helper method gets the residual rates from ResidualValues.csv</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object of analysis vehicle</li>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object of current selection</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>residual_rates</code> <em>float</em> - Residual rate as percentage of MSRP</li>
</ul>
<p><a id="t3co.tco.tcocalc.calculate_dollar_cost"></a></p>
<h4 id="calculate_dollar_cost">calculate_dollar_cost<a class="headerlink" href="#calculate_dollar_cost" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">def</span> <span class="nf">calculate_dollar_cost</span><span class="p">(</span><span class="n">veh</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>                          <span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span>
</span></code></pre></div>
<p>This helper method calculates the MSRP breakdown dictionary from
-   Glider
-   Fuel converter
-   Fuel Storage
-   Motor &amp; power electronics
-   Plug
-   Battery
-   Battery replacement
-   Purchase tax</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>veh</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object of analysis vehicle</li>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object of current selection</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>cost_set</code> <em>dict</em> - Dictionary containing MSRP breakdown</li>
</ul>
<p><a id="t3co.tco.tcocalc.calculate_opp_costs"></a></p>
<h4 id="calculate_opp_costs">calculate_opp_costs<a class="headerlink" href="#calculate_opp_costs" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="k">def</span> <span class="nf">calculate_opp_costs</span><span class="p">(</span><span class="n">vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>                        <span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>                        <span class="n">range_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span>
</span></code></pre></div>
<p>This helper method calculates opportunity costs and generates veh_opp_cost_set from
-   Payload Lost Capacity Cost/Multiplier
-   Fueling Downtime
-   Maintenance and Repair Downtime</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object of analysis vehicle</li>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object of current selection</li>
<li><code>range_dict</code> <em>dict</em> - Dictionary containing range values from fueleconomy.get_range_mi()</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>veh_opp_cost_set</code> <em>dict</em> - Dictionary containing opportunity cost results</li>
</ul>
<p><a id="t3co.tco.tcocalc.fill_fuel_eff_file"></a></p>
<h4 id="fill_fuel_eff_file">fill_fuel_eff_file<a class="headerlink" href="#fill_fuel_eff_file" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="k">def</span> <span class="nf">fill_fuel_eff_file</span><span class="p">(</span><span class="n">vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>                       <span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>                       <span class="n">mpgge_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</span></code></pre></div>
<p>This helper method generates a dataframe of Fuel Efficiency [mi/gge]
For PHEV, cd_grid_electric_mpgge, cd_fuel_mpgge, and cs_fuel_mpgge
For BEV, grid_mpgge
For HEV and CONV, mpgge</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object of analysis vehicle</li>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object of current selection</li>
<li><code>mpgge_dict</code> <em>dict</em> - MPGGE dictionary from fueleconomy.get_mpgge()</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>fefdata</code> <em>pd.DataFrame</em> - Dictionary containing Fuel Efficiency [mi/gge]</li>
</ul>
<p><a id="t3co.tco.tcocalc.fill_veh_expense_file"></a></p>
<h4 id="fill_veh_expense_file">fill_veh_expense_file<a class="headerlink" href="#fill_veh_expense_file" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="k">def</span> <span class="nf">fill_veh_expense_file</span><span class="p">(</span><span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>                          <span class="n">cost_set</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</span></code></pre></div>
<p>This helper method generates a dataframe of MSRP breakdown costs as Cost [$/veh]</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object of current selection</li>
<li><code>cost_set</code> <em>dict</em> - Dictionary containing MSRP breakdown cost components</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>vexpdf</code> <em>pd.DataFrame</em> - Dataframe containing MSRP components costs as Cost [$/veh]</li>
</ul>
<p><a id="t3co.tco.tcocalc.fill_trav_exp_tsv"></a></p>
<h4 id="fill_trav_exp_tsv">fill_trav_exp_tsv<a class="headerlink" href="#fill_trav_exp_tsv" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="k">def</span> <span class="nf">fill_trav_exp_tsv</span><span class="p">(</span><span class="n">vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>                      <span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</span></code></pre></div>
<p>This helper method generates a dataframe containing maintenance costs in Cost [$/mi]</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object of analysis vehicle</li>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object of current selection</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>df</code> <em>pd.DataFrame</em> - Dataframe containing maintenance costs in Cost [$/mi]</li>
</ul>
<p><a id="t3co.tco.tcocalc.fill_downtimelabor_cost_tsv"></a></p>
<h4 id="fill_downtimelabor_cost_tsv">fill_downtimelabor_cost_tsv<a class="headerlink" href="#fill_downtimelabor_cost_tsv" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="k">def</span> <span class="nf">fill_downtimelabor_cost_tsv</span><span class="p">(</span><span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>                                <span class="n">oppy_cost_set</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</span></code></pre></div>
<p>This helper method generates a dataframe containing fueling downtime and M&amp;R downtime costs in Cost [$/Yr]</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object of current selection</li>
<li><code>oppy_cost_set</code> <em>dict</em> - Dictionary containing fueling_downtime_oppy_cost_dol_per_yr,fueling_dwell_labor_cost_dol_per_yr and mr_downtime_oppy_cost_dol_per_yr</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>df</code> <em>pd.DataFrame</em> - Dataframe containing fueling and MR downtime costs in Cost [$/Yr]</li>
</ul>
<p><a id="t3co.tco.tcocalc.fill_market_share_tsv"></a></p>
<h4 id="fill_market_share_tsv">fill_market_share_tsv<a class="headerlink" href="#fill_market_share_tsv" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="k">def</span> <span class="nf">fill_market_share_tsv</span><span class="p">(</span><span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>                          <span class="n">num_vs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</span></code></pre></div>
<p>This helper method generates a dataframe containing market share of current vehicle selection per vehicle sold</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object of current selection</li>
<li><code>num_vs</code> <em>int, optional</em> - Number of vehicles. Defaults to 1.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>df</code> <em>pd.DataFrame</em> - Dataframe containing market share of current vehicle in Market Share [veh/veh]</li>
</ul>
<p><a id="t3co.tco.tcocalc.fill_fuel_expense_tsv"></a></p>
<h4 id="fill_fuel_expense_tsv">fill_fuel_expense_tsv<a class="headerlink" href="#fill_fuel_expense_tsv" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="k">def</span> <span class="nf">fill_fuel_expense_tsv</span><span class="p">(</span><span class="n">vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>                          <span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</span></code></pre></div>
<p>This helper method generates a dataframe of fuel operating costs in Cost [$/gge]</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object of analysis vehicle</li>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object of current selection</li>
</ul>
<p><strong>Raises</strong>:</p>
<ul>
<li><code>Exception</code> - Invalid fuel_type type</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>df</code> <em>pd.DataFrame</em> - Dataframe containing fuel operating costs in Cost [$/gge]</li>
</ul>
<p><a id="t3co.tco.tcocalc.fill_annual_tsv"></a></p>
<h4 id="fill_annual_tsv">fill_annual_tsv<a class="headerlink" href="#fill_annual_tsv" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="k">def</span> <span class="nf">fill_annual_tsv</span><span class="p">(</span><span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</span></code></pre></div>
<p>This helper method generates a dataframe of annual vehicle miles traveled (vmt) - Annual Travel [mi/yr]</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object of current selection</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>df</code> <em>pd.DataFrame</em> - Dataframe containing Annual Travel [mi/yr]</li>
</ul>
<p><a id="t3co.tco.tcocalc.fill_reg_sales_tsv"></a></p>
<h4 id="fill_reg_sales_tsv">fill_reg_sales_tsv<a class="headerlink" href="#fill_reg_sales_tsv" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="k">def</span> <span class="nf">fill_reg_sales_tsv</span><span class="p">(</span><span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>                       <span class="n">num_vs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</span></code></pre></div>
<p>This helper method generates a dataframe containing vehicle sales per year - Sales [veh]</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object of current selection</li>
<li><code>num_vs</code> <em>int, optional</em> - Number of vehicles. Defaults to 1.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>df</code> <em>pd.DataFrame</em> - Dataframe containing vehicle sales in Sales [veh]</li>
</ul>
<p><a id="t3co.tco.tcocalc.fill_insurance_tsv"></a></p>
<h4 id="fill_insurance_tsv">fill_insurance_tsv<a class="headerlink" href="#fill_insurance_tsv" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="k">def</span> <span class="nf">fill_insurance_tsv</span><span class="p">(</span><span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>                       <span class="n">veh_cost_set</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</span></code></pre></div>
<p>This helper method generates a dataframe containing vehicle insurance costs as Cost [$/Yr]</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object of current selection</li>
<li><code>veh_cost_set</code> <em>dict</em> - Dictionary containing MSRP costs</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>df</code> <em>pd.DataFrame</em> - Dataframe containing insurance costs in Cost [$/Yr]</li>
</ul>
<p><a id="t3co.tco.tcocalc.fill_residual_cost_tsc"></a></p>
<h4 id="fill_residual_cost_tsc">fill_residual_cost_tsc<a class="headerlink" href="#fill_residual_cost_tsc" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="k">def</span> <span class="nf">fill_residual_cost_tsc</span><span class="p">(</span><span class="n">vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>                           <span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>                           <span class="n">veh_cost_set</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</span></code></pre></div>
<p>This helper method generates a dataframe of residual costs as Cost [$/Yr]</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object of analysis vehicle</li>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object of current selection</li>
<li><code>veh_cost_set</code> <em>dict</em> - Dictionary containing MSRP costs</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>df</code> <em>pd.DataFrame</em> - Dataframe containing vehicle residual costs as Cost [$/Yr]</li>
</ul>
<p><a id="t3co.tco.tcocalc.fill_survival_tsv"></a></p>
<h4 id="fill_survival_tsv">fill_survival_tsv<a class="headerlink" href="#fill_survival_tsv" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="k">def</span> <span class="nf">fill_survival_tsv</span><span class="p">(</span><span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>                      <span class="n">num_vs</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</span></code></pre></div>
<p>This helper method generates a dataframe containing surviving vehicles as Surviving Vehicles [veh/veh]</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object of current selection</li>
<li><code>num_vs</code> <em>int, optional</em> - Number of vehicles. Defaults to 1.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>df</code> <em>pd.DataFrame</em> - Dataframe containing number of surviving vehicles on road in Surviving Vehicles [veh/veh]</li>
</ul>
<p><a id="t3co.tco.tcocalc.fill_fuel_split_tsv"></a></p>
<h4 id="fill_fuel_split_tsv">fill_fuel_split_tsv<a class="headerlink" href="#fill_fuel_split_tsv" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="k">def</span> <span class="nf">fill_fuel_split_tsv</span><span class="p">(</span><span class="n">vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>                        <span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>                        <span class="n">mpgge</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</span></code></pre></div>
<p>This helper method generates a dataframe of fraction of travel in each fuel type as Fraction of Travel [mi/mi]</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object of analysis vehicle</li>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object of current selection</li>
<li><code>mpgge</code> <em>dict</em> - MPGGE dictionary from fueleconomy.get_mpgge()</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>df</code> <em>pd.DataFrame</em> - Dataframe containing fraction of travel in each fuel type as Fraction of Travel [mi/mi]</li>
</ul>
<p><a id="t3co.tco.opportunity_cost"></a></p>
<h1 id="t3cotcoopportunity_cost">t3co.tco.opportunity_cost<a class="headerlink" href="#t3cotcoopportunity_cost" title="Permanent link">&para;</a></h1>
<p><a id="t3co.tco.opportunity_cost.OpportunityCost"></a></p>
<h2 id="opportunitycost-objects">OpportunityCost Objects<a class="headerlink" href="#opportunitycost-objects" title="Permanent link">&para;</a></h2>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="k">class</span> <span class="nc">OpportunityCost</span><span class="p">()</span>
</span></code></pre></div>
<p>This class is used to calculate the different opportunity costs for a scenario and vehicle
- Payload Capacity Cost Multiplier
- Fueling Downtime Cost
- Maintenance and Repair Downtime Cost</p>
<p><a id="t3co.tco.opportunity_cost.OpportunityCost.__init__"></a></p>
<h4 id="__init___1">__init__<a class="headerlink" href="#__init___1" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>             <span class="n">range_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>             <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>Initializes OpportunityCost object using Scenario object, range_dict (from fueleconomy module), and other arguments</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object</li>
<li><code>range_dict</code> <em>dict, optional</em> - dictionary containing primary_fuel_range_mi from fueleconomy.get_range_mi function. Defaults to None.</li>
</ul>
<p><a id="t3co.tco.opportunity_cost.OpportunityCost.set_kdes"></a></p>
<h4 id="set_kdes">set_kdes<a class="headerlink" href="#set_kdes" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="k">def</span> <span class="nf">set_kdes</span><span class="p">(</span><span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>             <span class="n">bw_method</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.15</span><span class="p">,</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>             <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This method sets tje kde kernel. This is time-consuming, only call this once, if possible.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object</li>
<li><code>bw_method</code> <em>float, optional</em> - kernel bandwidth method used by guassian_kde. Defaults to .15.</li>
<li><code>verbose</code> <em>bool, optional</em> - if True, prints process sets. Defaults to False.</li>
</ul>
<p><a id="t3co.tco.opportunity_cost.OpportunityCost.set_payload_loss_factor"></a></p>
<h4 id="set_payload_loss_factor">set_payload_loss_factor<a class="headerlink" href="#set_payload_loss_factor" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="k">def</span> <span class="nf">set_payload_loss_factor</span><span class="p">(</span><span class="n">a_vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>                            <span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>                            <span class="n">plots</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>                            <span class="n">plots_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This method runs teh kernel density estimation function set_kdes and calculates the payload capacity loss factor (payload_cap_cost_multiplier)             of the new vehicle compared to a conventional vehicle's reference empty weight.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>a_vehicle</code> <em>fastsim.vehicle</em> - FASTSim vehicle object of the analysis vehicle</li>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object of current selection</li>
<li><code>plots</code> <em>bool, optional</em> - if True, creates histogram of KDE weight bins. Defaults to False.</li>
<li><code>plots_dir</code> <em>str, optional</em> - output diretory for saving plot figure. Defaults to None.</li>
</ul>
<p><a id="t3co.tco.opportunity_cost.OpportunityCost.set_fueling_dwell_time_cost"></a></p>
<h4 id="set_fueling_dwell_time_cost">set_fueling_dwell_time_cost<a class="headerlink" href="#set_fueling_dwell_time_cost" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="k">def</span> <span class="nf">set_fueling_dwell_time_cost</span><span class="p">(</span><span class="n">a_vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>                                <span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This function calculates the fueling dwell time cost for a vehicle based on fuel fill rate/charging power and shifts_per_year</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>a_vehicle</code> <em>fastsim.vehicle</em> - FASTSim vehicle object of analysis vehicle</li>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object for current selection</li>
</ul>
<p><a id="t3co.tco.opportunity_cost.OpportunityCost.set_M_R_downtime_cost"></a></p>
<h4 id="set_m_r_downtime_cost">set_M_R_downtime_cost<a class="headerlink" href="#set_m_r_downtime_cost" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="k">def</span> <span class="nf">set_M_R_downtime_cost</span><span class="p">(</span><span class="n">a_vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>                          <span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This function calculates the Maintenance and Repair (M&amp;R) downtime cost based on planned, unplanned, and tire replacement downtime inputs</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>a_vehicle</code> <em>fastsim.vehicle</em> - FASTSim object of the analysis vehicle</li>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object for the current selection</li>
</ul>
<p><a id="t3co.tco.opportunity_cost.main"></a></p>
<h4 id="main">main<a class="headerlink" href="#main" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="k">def</span> <span class="nf">main</span><span class="p">()</span>
</span></code></pre></div>
<p>Runs the opportunity cost module as a standalone code based on input vehicles and scenarios</p>
<p><a id="t3co.tco.tco_stock_emissions"></a></p>
<h1 id="t3cotcotco_stock_emissions">t3co.tco.tco_stock_emissions<a class="headerlink" href="#t3cotcotco_stock_emissions" title="Permanent link">&para;</a></h1>
<p><a id="t3co.tco.tco_stock_emissions.dropCols"></a></p>
<h4 id="dropcols">dropCols<a class="headerlink" href="#dropcols" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="k">def</span> <span class="nf">dropCols</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</span></code></pre></div>
<p>This helper method drops columns if any row contains ['*']</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>df</code> <em>pd.DataFrame</em> - Input dataframe</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>df</code> <em>pd.DataFrame</em> - Output dataframe with dropped dummy columns</li>
</ul>
<p><a id="t3co.tco.tco_stock_emissions.stockModel"></a></p>
<h4 id="stockmodel">stockModel<a class="headerlink" href="#stockmodel" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="k">def</span> <span class="nf">stockModel</span><span class="p">(</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>    <span class="n">sales</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>    <span class="n">marketShares</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>    <span class="n">survival</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>    <span class="n">annualTravel</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a>    <span class="n">fuelSplit</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>    <span class="n">fuelEfficiency</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>    <span class="n">emissions</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a>    <span class="n">vehicleCosts</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a>    <span class="n">travelCosts</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-32-11"><a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a>    <span class="n">fuelCosts</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-32-12"><a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a>    <span class="n">insuranceCosts</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-32-13"><a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a>    <span class="n">residualCosts</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-32-14"><a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a>    <span class="n">downtimeCosts</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-32-15"><a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a>    <span class="n">write_files</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-32-16"><a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">]</span>
</span></code></pre></div>
<p>This function generates the ownershipCosts dataframe from the dataframes for each cost category</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>sales</code> <em>pd.DataFrame</em> - Dataframe of yearly number of vehicles sales</li>
<li><code>marketShares</code> <em>pd.DataFrame</em> - Dataframe of yearly Market Share of selection's vocation per vehicle [veh/veh]</li>
<li><code>survival</code> <em>pd.DataFrame</em> - Dataframe of yearly Surviving vehicle per each vehicle [veh/veh]</li>
<li><code>annualTravel</code> <em>pd.DataFrame</em> - Dataframe of vehicle's vmt: Annual Travel [mi/yr]</li>
<li><code>fuelSplit</code> <em>pd.DataFrame</em> - Dataframe of fraction of travel using each fuel [mi/mi]</li>
<li><code>fuelEfficiency</code> <em>pd.DataFrame</em> - Dataframe of vehicle's yearly average fuel efficiency [mi/gge]</li>
<li><code>emissions</code> <em>pd.DataFrame</em> - Dataframe of vehicle's yearly average emissions</li>
<li><code>vehicleCosts</code> <em>pd.DataFrame, optional</em> - Dataframe of vehicle components costs [dol]. Defaults to None.</li>
<li><code>travelCosts</code> <em>pd.DataFrame, optional</em> - Dataframe of maintenance costs [dol/mi]. Defaults to None.</li>
<li><code>fuelCosts</code> <em>pd.DataFrame, optional</em> - Dataframe of fuel operating costs [dol/gge]. Defaults to None.</li>
<li><code>insuranceCosts</code> <em>pd.DataFrame, optional</em> - Dataframe of yearly insurance costs [dol]. Defaults to None.</li>
<li><code>residualCosts</code> <em>pd.DataFrame, optional</em> - Dataframe of yearly residual costs [dol]. Defaults to None.</li>
<li><code>downtimeCosts</code> <em>pd.DataFrame, optional</em> - Dataframe of yearly downtime costs [dol]. Defaults to None.</li>
<li><code>write_files</code> <em>bool, optional</em> - if True, save vehicleCosts, travelCosts, fuelCosts, insuranceCosts,residualCosts, downtimeCosts . Defaults to False.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>stock</code> <em>pd.DataFrame</em> - Dataframe of stock model of vehicles in the market</li>
<li><code>emissions</code> <em>pd.DataFrame</em> - Dataframe of total emissions</li>
<li><code>ownershipCosts</code> <em>pd.DataFrame</em> - Dataframe of all ownership costs for given selection</li>
</ul>
<p><a id="t3co.tco.tco_analysis"></a></p>
<h1 id="t3cotcotco_analysis">t3co.tco.tco_analysis<a class="headerlink" href="#t3cotcotco_analysis" title="Permanent link">&para;</a></h1>
<p><a id="t3co.tco.tco_analysis.get_operating_costs"></a></p>
<h4 id="get_operating_costs">get_operating_costs<a class="headerlink" href="#get_operating_costs" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="k">def</span> <span class="nf">get_operating_costs</span><span class="p">(</span><span class="n">ownershipCosts</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>                        <span class="n">TCO_switch</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;DIRECT&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</span></code></pre></div>
<p>This function creates a dataframe of operating cost from ownershipCosts dataframe based on TCO_switch ('DIRECT' or 'EFFICIENCY')</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>ownershipCosts</code> <em>pd.DataFrame</em> - Dataframe containing year-wise ownership costs estimations like Fuel, maintenance, insurance, etc</li>
<li><code>TCO_switch</code> <em>str, optional</em> - Switch between different TCO calculations - 'DIRECT' or 'EFFICIENCY'. Defaults to 'DIRECT'.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>operatingCosts_df</code> <em>pd.DataFrame</em> - Dataframe containing operating cost categories based on TCO_switch</li>
</ul>
<p><a id="t3co.tco.tco_analysis.discounted_costs"></a></p>
<h4 id="discounted_costs">discounted_costs<a class="headerlink" href="#discounted_costs" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="k">def</span> <span class="nf">discounted_costs</span><span class="p">(</span><span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>                     <span class="n">ownershipCosts</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</span></code></pre></div>
<p>This function calculates the yearly discounted costs for each category of ownershipCosts based on scenario.discRate</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object for current selection</li>
<li><code>ownershipCosts</code> <em>pd.DataFrame</em> - Dataframe containing year-wise ownership costs estimations like Fuel, maintenance, insurance, etc</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>ownershipCosts</code> <em>pd.DataFrame</em> - ownershipCosts dataframe with additional 'Discounted Cost [$]' column</li>
</ul>
<p><a id="t3co.tco.tco_analysis.calc_discountedTCO"></a></p>
<h4 id="calc_discountedtco">calc_discountedTCO<a class="headerlink" href="#calc_discountedtco" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="k">def</span> <span class="nf">calc_discountedTCO</span><span class="p">(</span><span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>                       <span class="n">discounted_costs_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>                       <span class="n">veh_cost_set</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>                       <span class="n">veh_opp_cost_set</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>                       <span class="n">sim_drive</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">simdrive</span><span class="o">.</span><span class="n">SimDrive</span><span class="p">,</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>                       <span class="n">TCO_switch</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;DIRECT&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span>
</span></code></pre></div>
<p>This function calculates the discounted Total Cost of Ownerhip (discounted to account for time-value of money).
There are two methods to calculate discounted TCO - 'DIRECT' and 'EFFICIENCY'</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object for current selection</li>
<li><code>discounted_costs_df</code> <em>pd.DataFrame</em> - discounted operating costs dataframe</li>
<li><code>veh_cost_set</code> <em>dict</em> - Dictionary containing MSRP breakdown</li>
<li><code>veh_opp_cost_set</code> <em>dict</em> - Dictionary containing opportunity costs breakdown</li>
<li><code>sim_drive</code> <em>fastsim.simdrive.SimDrive</em> - FASTSim.simdrive.SimDrive object containing inputs and outputs from vehicle simulation over a cycle</li>
<li><code>TCO_switch</code> <em>str, optional</em> - Switch between different TCO calculations - 'DIRECT' or 'EFFICIENCY'. Defaults to 'DIRECT'.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>discounted_tco_dol</code> <em>float</em> - Discounted Total Cost of Ownership value</li>
<li><code>oppy_cost_dol_set</code> <em>dict</em> - Dictionary containing discounted opportunity costs breakdown</li>
<li><code>veh_oper_cost_set</code> <em>dict</em> - Dictionary containing discounted operating costs breakdown</li>
</ul>
<p><a id="t3co.tco.tco_analysis.get_tco_of_vehicle"></a></p>
<h4 id="get_tco_of_vehicle">get_tco_of_vehicle<a class="headerlink" href="#get_tco_of_vehicle" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="k">def</span> <span class="nf">get_tco_of_vehicle</span><span class="p">(</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>    <span class="n">vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>    <span class="n">range_cyc</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="n">Cycle</span><span class="p">,</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>    <span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>    <span class="n">write_tsv</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span>
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>        <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a>        <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a>        <span class="nb">dict</span><span class="p">,</span>
</span><span id="__span-36-10"><a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a>        <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="__span-36-11"><a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a>        <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="__span-36-12"><a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a>        <span class="nb">dict</span><span class="p">,</span>
</span><span id="__span-36-13"><a id="__codelineno-36-13" name="__codelineno-36-13" href="#__codelineno-36-13"></a>        <span class="nb">dict</span><span class="p">,</span>
</span><span id="__span-36-14"><a id="__codelineno-36-14" name="__codelineno-36-14" href="#__codelineno-36-14"></a>        <span class="n">fastsim</span><span class="o">.</span><span class="n">simdrive</span><span class="o">.</span><span class="n">SimDrive</span><span class="p">,</span>
</span><span id="__span-36-15"><a id="__codelineno-36-15" name="__codelineno-36-15" href="#__codelineno-36-15"></a>        <span class="nb">dict</span><span class="p">,</span>
</span><span id="__span-36-16"><a id="__codelineno-36-16" name="__codelineno-36-16" href="#__codelineno-36-16"></a>        <span class="nb">dict</span><span class="p">,</span>
</span><span id="__span-36-17"><a id="__codelineno-36-17" name="__codelineno-36-17" href="#__codelineno-36-17"></a>        <span class="nb">dict</span><span class="p">,</span>
</span><span id="__span-36-18"><a id="__codelineno-36-18" name="__codelineno-36-18" href="#__codelineno-36-18"></a><span class="p">]</span>
</span></code></pre></div>
<p>This function calculates the Total Cost of Ownership of a vehicle and scenario for a given cycle. The three main components are:
- Opportunity Costs
- MSRP
- Operating Costs</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object of selected vehicle</li>
<li><code>range_cyc</code> <em>fastsim.cycle.Cycle</em> - FASTSim range cycle object</li>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object for current selection</li>
<li><code>write_tsv</code> <em>bool, optional</em> - if True, save intermediate files as TSV. Defaults to False.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>tot_cost_dol</code> <em>float</em> - TCO in dollars</li>
<li><code>discounted_tco_dol</code> <em>float</em> - discounted TCO in dollars</li>
<li><code>oppy_cost_set</code> <em>dict</em> - Dictionary of opportunity cost breakdown</li>
<li><code>ownership_costs_df</code> <em>pd.DataFrame</em> - Ownerhip Costs dataframe containing different categories per year</li>
<li><code>discounted_costs_df</code> <em>pd.DataFrame</em> - discounted Ownerhip Costs dataframe containing different categories per year</li>
<li><code>mpgge</code> <em>dict</em> - Dictionary containing MPGGEs</li>
<li><code>veh_cost_set</code> <em>dict</em> - Dictionary containing MSRP breakdown</li>
<li><code>design_cycle_sdr</code> <em>fastsim.simdrive.SimDrive</em> - FASTSim SimDrive object for design drivecycle</li>
<li><code>veh_oper_cost_set</code> <em>dict</em> - Dictionary containing operating costs breakdown</li>
<li><code>veh_opp_cost_set</code> <em>dict</em> - Dictionary containing opportunity costs breakdown</li>
<li><code>tco_files</code> <em>dict</em> - Dictionary containing TCO intermediate dataframes</li>
</ul>
<p><a id="t3co.tests.test_tcos"></a></p>
<h1 id="t3coteststest_tcos">t3co.tests.test_tcos<a class="headerlink" href="#t3coteststest_tcos" title="Permanent link">&para;</a></h1>
<p>Testing module for TCO to ensure the TCO related results remain consistent over time</p>
<p>Flow:
code reads TCO tests vehicles and scenarios one at a time. Generates TCO output dictionaries
and compares the results with the hard coded dictionaries below in comparison_dict.</p>
<p><a id="t3co.tests.test_tcos.remove"></a></p>
<h4 id="remove">remove<a class="headerlink" href="#remove" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
</span></code></pre></div>
<p>removes key-values from output dict that can't be compared very easily</p>
<p><a id="t3co.tests.test_tcos.RunCONVTCOTests"></a></p>
<h2 id="runconvtcotests-objects">RunCONVTCOTests Objects<a class="headerlink" href="#runconvtcotests-objects" title="Permanent link">&para;</a></h2>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="k">class</span> <span class="nc">RunCONVTCOTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">)</span>
</span></code></pre></div>
<p><a id="t3co.tests.test_tcos.RunCONVTCOTests.compare"></a></p>
<h4 id="compare">compare<a class="headerlink" href="#compare" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="k">def</span> <span class="nf">compare</span><span class="p">(</span><span class="n">runresults</span><span class="p">,</span> <span class="n">staticresults</span><span class="p">)</span>
</span></code></pre></div>
<p>Check all key-value pairs between dicts for equality</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>runresults</code>: dict of results from generated vehicle results</li>
<li><code>staticresults</code>: dict of results from static comparison dict</li>
</ul>
<p><strong>Returns</strong>:</p>
<p>None</p>
<p><a id="t3co.tests"></a></p>
<h1 id="t3cotests">t3co.tests<a class="headerlink" href="#t3cotests" title="Permanent link">&para;</a></h1>
<p>Package for testing modules compliant with unittest folder structure.</p>
<p><a id="t3co.tests.tco_tests.t2co_tco_benchmark"></a></p>
<h1 id="t3coteststco_testst2co_tco_benchmark">t3co.tests.tco_tests.t2co_tco_benchmark<a class="headerlink" href="#t3coteststco_testst2co_tco_benchmark" title="Permanent link">&para;</a></h1>
<p>Testing module for TCO to ensure the TCO related results remain consistent over time with
previous model (Tech Targets c 2019)</p>
<p>Flow:
code reads TCO tests vehicles and scenarios one at a time. Generates TCO output dictionaries
and compares the results with the hard coded dictionaries below in comparison_dict.</p>
<p><a id="t3co.tests.tco_tests.t2co_tco_benchmark.veh_no"></a></p>
<h4 id="veh_no">veh_no<a class="headerlink" href="#veh_no" title="Permanent link">&para;</a></h4>
<p><a id="t3co.tests.tco_tests.t2co_bev_mpgge_benchmark"></a></p>
<h1 id="t3coteststco_testst2co_bev_mpgge_benchmark">t3co.tests.tco_tests.t2co_bev_mpgge_benchmark<a class="headerlink" href="#t3coteststco_testst2co_bev_mpgge_benchmark" title="Permanent link">&para;</a></h1>
<p>Testing module for TCO to ensure the TCO related results remain consistent over time with
previous model (Tech Targets c 2019)</p>
<p>Flow:
code reads TCO tests vehicles and scenarios one at a time. Generates TCO output dictionaries
and compares the results with the hard coded dictionaries below in comparison_dict.</p>
<p><a id="t3co.tests.tco_tests.t2co_bev_mpgge_benchmark.veh_no"></a></p>
<h4 id="veh_no_1">veh_no<a class="headerlink" href="#veh_no_1" title="Permanent link">&para;</a></h4>
<p><a id="t3co.tests.test_moo"></a></p>
<h1 id="t3coteststest_moo">t3co.tests.test_moo<a class="headerlink" href="#t3coteststest_moo" title="Permanent link">&para;</a></h1>
<p>Module for testing moo.  Folder structure, file name, and code 
are written to be compliant with python's unittest package, but 
main() can be called via importing</p>
<p><a id="t3co.moopack"></a></p>
<h1 id="t3comoopack">t3co.moopack<a class="headerlink" href="#t3comoopack" title="Permanent link">&para;</a></h1>
<p>Sub-package contaning module that runs PyMOO optimization</p>
<p><a id="t3co.moopack.moo"></a></p>
<h1 id="t3comoopackmoo">t3co.moopack.moo<a class="headerlink" href="#t3comoopackmoo" title="Permanent link">&para;</a></h1>
<p><a id="t3co.moopack.moo.T3COProblem"></a></p>
<h2 id="t3coproblem-objects">T3COProblem Objects<a class="headerlink" href="#t3coproblem-objects" title="Permanent link">&para;</a></h2>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="k">class</span> <span class="nc">T3COProblem</span><span class="p">(</span><span class="n">ElementwiseProblem</span><span class="p">)</span>
</span></code></pre></div>
<p>Class for creating PyMoo problem.</p>
<p><a id="t3co.moopack.moo.T3COProblem.setup_opt_records"></a></p>
<h4 id="setup_opt_records">setup_opt_records<a class="headerlink" href="#setup_opt_records" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="k">def</span> <span class="nf">setup_opt_records</span><span class="p">()</span>
</span></code></pre></div>
<p>This method sets up the empty optimization record arrays</p>
<p><a id="t3co.moopack.moo.T3COProblem.__init__"></a></p>
<h4 id="__init___2">__init__<a class="headerlink" href="#__init___2" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="n">knobs_bounds</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>             <span class="n">vnum</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>             <span class="n">optimize_pt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a>             <span class="n">obj_list</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a>             <span class="n">constr_list</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a>             <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-42-7"><a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a>             <span class="n">config</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Config</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-42-8"><a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a>             <span class="n">do_input_validation</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-42-9"><a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a>             <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This constructor initializes optimization input variables</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>knobs_bounds</code> <em>dict</em> - Dictionary containing knobs bounds for optimization</li>
<li><code>vnum</code> <em>float</em> - Vehicle selection number</li>
<li><code>optimize_pt</code> <em>str, optional</em> - Vehicle powertrain type - Conv, BEV, HEV, PHEV. Defaults to gl.BEV.</li>
<li><code>obj_list</code> <em>list, optional</em> - List of objectives. Defaults to None.</li>
<li><code>constr_list</code> <em>list, optional</em> - List of constraints. Defaults to None.</li>
<li><code>verbose</code> <em>bool, optional</em> - if True, prints process steps. Defaults to False.</li>
<li><code>config</code> <em>run_scenario.Config, optional</em> - T3CO Config object containing analysis attributes and scenario attribute overrides. Defaults to None.</li>
</ul>
<p><a id="t3co.moopack.moo.T3COProblem.compile_reporting_vars"></a></p>
<h4 id="compile_reporting_vars">compile_reporting_vars<a class="headerlink" href="#compile_reporting_vars" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="k">def</span> <span class="nf">compile_reporting_vars</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This method creates an output dictionary containing optimization results</p>
<p><a id="t3co.moopack.moo.T3COProblem.instantiate_moo_vehicles_and_scenario"></a></p>
<h4 id="instantiate_moo_vehicles_and_scenario">instantiate_moo_vehicles_and_scenario<a class="headerlink" href="#instantiate_moo_vehicles_and_scenario" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="k">def</span> <span class="nf">instantiate_moo_vehicles_and_scenario</span><span class="p">(</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>        <span class="n">vnum</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>        <span class="n">config</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Config</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a>        <span class="n">do_input_validation</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This method instantiates the multi-objective optimization problem vehicles and scenarios, starting with the baseline Conventional vehicle.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>vnum</code> <em>int</em> - vehicle selection number</li>
<li><code>config</code> <em>run_scenario.Config, optional</em> - T3CO Config object containing analysis attributes and scenario attribute overrides. Defaults to None.</li>
</ul>
<p><strong>Raises</strong>:</p>
<ul>
<li><code>TypeError</code> - Invalid optimize_pt selection</li>
</ul>
<p><a id="t3co.moopack.moo.T3COProblem.cda_percent_delta_knob"></a></p>
<h4 id="cda_percent_delta_knob">cda_percent_delta_knob<a class="headerlink" href="#cda_percent_delta_knob" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="k">def</span> <span class="nf">cda_percent_delta_knob</span><span class="p">(</span><span class="n">CdA_perc_reduction</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>                           <span class="n">optvehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This method sets the drag_coef based on aero improvement curve and glider_kg based on cda_cost_coeff_a and cda_cost_coeff_b</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>CdA_perc_reduction</code> <em>str</em> - Name of aero improvement curve file</li>
<li><code>optvehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object for optimization vehicle</li>
</ul>
<p><a id="t3co.moopack.moo.T3COProblem.weight_delta_percent_knob"></a></p>
<h4 id="weight_delta_percent_knob">weight_delta_percent_knob<a class="headerlink" href="#weight_delta_percent_knob" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="k">def</span> <span class="nf">weight_delta_percent_knob</span><span class="p">(</span><span class="n">wt_perc_reduction</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>                              <span class="n">optvehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This method sets the knob from the lightweighting curve</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>wt_perc_reduction</code> <em>float</em> - Weight reduction percentage value from lightweighting curve</li>
<li><code>optvehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object of the optimization vehicle</li>
</ul>
<p><a id="t3co.moopack.moo.T3COProblem.fc_peak_eff_knob"></a></p>
<h4 id="fc_peak_eff_knob">fc_peak_eff_knob<a class="headerlink" href="#fc_peak_eff_knob" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="k">def</span> <span class="nf">fc_peak_eff_knob</span><span class="p">(</span><span class="n">fc_peak_eff</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>                     <span class="n">optvehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This method sets the knob from the engine efficiency curve</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>fc_peak_eff</code> <em>float</em> - Fuel converter peak effiency override from engine efficiency improvement curve</li>
<li><code>optvehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object for optimization vehicle</li>
</ul>
<p><a id="t3co.moopack.moo.T3COProblem.get_objs"></a></p>
<h4 id="get_objs">get_objs<a class="headerlink" href="#get_objs" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="k">def</span> <span class="nf">get_objs</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>             <span class="n">write_tsv</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span>
</span></code></pre></div>
<p>This method gets called when PyMoo calls _evaluate. It initializes objectives and constraints and runs vehicle_scenario_sweep</p>
<p>x optimization knobs = [max motor kw, battery kwh, drag coeff % improvement]
Function for running FE cycles and accel tests then returning
fuel consumption and zero-to-sixty times.</p>
<p>x is a set of genes (or parameters), so kwh size is a gene
chromosome is a full gene, all values in x</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>x</code> <em>dict</em> - Dictionary containing optimization knobs - {max motor kw, battery kwh, drag coeff % improvement}</li>
<li><code>write_tsv</code> <em>bool, optional</em> - if True, save intermediate dataframes. Defaults to False.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>obj_arr_F</code> <em>np.array</em> - Array of objectives - tot_cost and phev_cd_fuel_used_kwh</li>
<li><code>constraint_results_G</code> <em>np.array</em> - Array of constraints</li>
<li><code>rs_sweep</code> <em>dict</em> - Output dictionary from vehicle_scenario_sweep</li>
</ul>
<p><a id="t3co.moopack.moo.T3COProblem.adjust_fc_peak_eff"></a></p>
<h4 id="adjust_fc_peak_eff">adjust_fc_peak_eff<a class="headerlink" href="#adjust_fc_peak_eff" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="k">def</span> <span class="nf">adjust_fc_peak_eff</span><span class="p">(</span><span class="n">fc_peak_eff</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>                       <span class="n">optvehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This method augments an advanced vehicle fc_eff_array based on new fc_peak_eff using baseline fc_eff_array</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>fc_peak_eff</code> <em>float</em> - Fuel converter peak efficiency override</li>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object of current selection</li>
<li><code>optvehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object of optimization vehicle</li>
</ul>
<p><a id="t3co.moopack.moo.T3COProblem.sweep_knob"></a></p>
<h4 id="sweep_knob">sweep_knob<a class="headerlink" href="#sweep_knob" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="k">def</span> <span class="nf">sweep_knob</span><span class="p">(</span><span class="n">knob</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>               <span class="n">definition</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a>               <span class="n">plot</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a>               <span class="n">optres</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a>               <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span>
</span></code></pre></div>
<p>This method sweeps the optimization knob of vehicle from lbound to ubound, return TCO             plot optres to see if there's agreement from opt solution and your sweep</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>knob</code> <em>list</em> - list of knobs names for optimization</li>
<li><code>definition</code> <em>int, optional</em> - Number of points. Defaults to 100.</li>
<li><code>plot</code> <em>bool, optional</em> - if True, saves plot of bounds and TCOs. Defaults to False.</li>
<li><code>optres</code> <em>float, optional</em> - Optimization resolution. Defaults to None.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>tcos</code> <em>list</em> - List of TCOs of length=definition</li>
</ul>
<p><a id="t3co.moopack.moo.T3COProblem.get_tco_from_moo_advanced_result"></a></p>
<h4 id="get_tco_from_moo_advanced_result">get_tco_from_moo_advanced_result<a class="headerlink" href="#get_tco_from_moo_advanced_result" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="k">def</span> <span class="nf">get_tco_from_moo_advanced_result</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span>
</span></code></pre></div>
<p>This method is a utility function to get detailed TCO information from optimized MOO result</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>x</code> <em>dict</em> - Dictionary containing optimization knobs - [max motor kw, battery kwh, drag coeff % improvement]</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>out</code> <em>dict</em> - Dictionary containing TCO results for optimization runs</li>
</ul>
<p><a id="t3co.moopack.moo.T3CODisplay"></a></p>
<h2 id="t3codisplay-objects">T3CODisplay Objects<a class="headerlink" href="#t3codisplay-objects" title="Permanent link">&para;</a></h2>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="k">class</span> <span class="nc">T3CODisplay</span><span class="p">(</span><span class="n">Output</span><span class="p">)</span>
</span></code></pre></div>
<p>This class contains the display object for Pymoo optimization printouts - pymoo.util.display.Display</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>Output</code> <em>pymoo.util.display.output.Output</em> - Pymoo minimize display object</li>
</ul>
<p><a id="t3co.moopack.moo.T3CODisplay.__init__"></a></p>
<h4 id="__init___3">__init__<a class="headerlink" href="#__init___3" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This constructor initializes the pymoo.util.display.Display object</p>
<p><a id="t3co.moopack.moo.run_optimization"></a></p>
<h4 id="run_optimization">run_optimization<a class="headerlink" href="#run_optimization" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="k">def</span> <span class="nf">run_optimization</span><span class="p">(</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a>        <span class="n">pop_size</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a>        <span class="n">n_max_gen</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a>        <span class="n">knobs_bounds</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a>        <span class="n">vnum</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="__span-54-6"><a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a>        <span class="n">x_tol</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-54-7"><a id="__codelineno-54-7" name="__codelineno-54-7" href="#__codelineno-54-7"></a>        <span class="n">f_tol</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-54-8"><a id="__codelineno-54-8" name="__codelineno-54-8" href="#__codelineno-54-8"></a>        <span class="n">nth_gen</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="__span-54-9"><a id="__codelineno-54-9" name="__codelineno-54-9" href="#__codelineno-54-9"></a>        <span class="n">n_last</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="__span-54-10"><a id="__codelineno-54-10" name="__codelineno-54-10" href="#__codelineno-54-10"></a>        <span class="n">algo</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="__span-54-11"><a id="__codelineno-54-11" name="__codelineno-54-11" href="#__codelineno-54-11"></a>        <span class="n">obj_list</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-54-12"><a id="__codelineno-54-12" name="__codelineno-54-12" href="#__codelineno-54-12"></a>        <span class="n">config</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Config</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-54-13"><a id="__codelineno-54-13" name="__codelineno-54-13" href="#__codelineno-54-13"></a>        <span class="n">do_input_validation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-54-14"><a id="__codelineno-54-14" name="__codelineno-54-14" href="#__codelineno-54-14"></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">pymoo</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">Result</span><span class="p">,</span> <span class="n">T3COProblem</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span>
</span></code></pre></div>
<p>This method creates and runs T3COProblem minimization</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>pop_size</code> <em>int</em> - Population size for optimization</li>
<li><code>n_max_gen</code> <em>int</em> - maximum number of generations for optimization</li>
<li><code>knobs_bounds</code> <em>dict</em> - Dictionary containing knobs and bounds</li>
<li><code>vnum</code> <em>int</em> - vehicle selection number</li>
<li><code>x_tol</code> <em>float</em> - tolerance in parameter space</li>
<li><code>f_tol</code> <em>float</em> - tolerance in objective space</li>
<li><code>nth_gen</code> <em>int</em> - number of generations to evaluate if convergence occurs</li>
<li><code>n_last</code> <em>int</em> - number of generations to look back for termination</li>
<li><code>algo</code> <em>str</em> - algorithm name</li>
<li><code>obj_list</code> <em>list, optional</em> - list of objectives - TCO or PHEV_MINIMIZE_FUEL_USE_OBJECTIVE. Defaults to None.</li>
<li><code>config</code> <em>run_scenario.Config, optional</em> - T3CO Config object containing analysis attributes and scenario attribute overrides. Defaults to None.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>res</code> <em>pymoo.core.result.Result</em> - Pymoo optimization result object</li>
<li><code>problem</code> <em>moo.T3COProblem</em> - T3COProblem ElementwiseProblem object</li>
<li><code>OPTIMIZATION_SUCCEEDED</code> <em>bool</em> - if True, pymoo.minimize succeeded</li>
</ul>
<p><a id="t3co.objectives.accel"></a></p>
<h1 id="t3coobjectivesaccel">t3co.objectives.accel<a class="headerlink" href="#t3coobjectivesaccel" title="Permanent link">&para;</a></h1>
<p>Module for simulating acceleration performance.</p>
<p><a id="t3co.objectives.accel.get_accel"></a></p>
<h4 id="get_accel">get_accel<a class="headerlink" href="#get_accel" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="k">def</span> <span class="nf">get_accel</span><span class="p">(</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a>        <span class="n">analysis_vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a>        <span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-55-4"><a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a>        <span class="n">set_weight_to_max_kg</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-55-5"><a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a>        <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="__span-55-6"><a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a>        <span class="n">ess_init_soc</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">]</span>
</span></code></pre></div>
<p>This function runs a simdrive for getting 0-to-60 and 0-30 mph time with fully laden weight at GVWR (plus gvwr_credit_kg?)</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>analysis_vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object for analysis vehicle</li>
<li><code>scenario</code> <em>run_scenario.Scenario, optional</em> - Scenario object for current selection. Defaults to None.</li>
<li><code>set_weight_to_max_kg</code> <em>bool, optional</em> - if True, runs run_scenario.set_test_weight(). Defaults to True.</li>
<li><code>verbose</code> <em>bool, optional</em> - if True, prints the process steps. Defaults to False.</li>
<li><code>ess_init_soc</code> <em>float, optional</em> - ESS initial SOC override. Defaults to None.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>zero_to_sixty</code> <em>float</em> - 0-60 mph acceleration time in sec</li>
<li><code>zero_to_thirty</code> <em>float</em> - 0-30 mph acceleration time in sec</li>
<li><code>accel_simdrive</code> <em>fastsim.simdrive.SimDrive</em> - FASTSim.simdrive.SimDrive object for running the acceleration drivecycle</li>
</ul>
<p><a id="t3co.objectives.fueleconomy"></a></p>
<h1 id="t3coobjectivesfueleconomy">t3co.objectives.fueleconomy<a class="headerlink" href="#t3coobjectivesfueleconomy" title="Permanent link">&para;</a></h1>
<p>Module containing functions for calculating fuel economy objectives.</p>
<p><a id="t3co.objectives.fueleconomy.get_range_mi"></a></p>
<h4 id="get_range_mi">get_range_mi<a class="headerlink" href="#get_range_mi" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="k">def</span> <span class="nf">get_range_mi</span><span class="p">(</span><span class="n">mpgge_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a>                 <span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span>
</span></code></pre></div>
<p>This funcion computes range [miles] from mpgge using vehicle powertrain type and energy (or fuel) store size.</p>
<p>Considerations:
- at some point each vehicle powertrain type could employ the concept
of a "first fuel" or "primary fuel" - so return a primary fuel-based range for all
powertrains.
- PHEVs have two fuels (generally diesel and electricity). So return two ranges:
-- One for determining range during optimization
i.e. the CD range that PHEVs are commonly specified with
(e.g. PHEV-50 = PHEV with 50 mi AER "All-Electric Range" ~= CD range)
-- One that represents the "true" total PHEV range (CD + CS using both ESS and FS)</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>mpgge_info</code> <em>dict</em> - Dictionary containing MPGGE breakdown</li>
<li><code>vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object of analysis vehicle</li>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object of current selection</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>range_dict</code> <em>dict</em> - Dictionary containing different range results</li>
</ul>
<p><a id="t3co.objectives.fueleconomy.get_sim_drive"></a></p>
<h4 id="get_sim_drive">get_sim_drive<a class="headerlink" href="#get_sim_drive" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="k">def</span> <span class="nf">get_sim_drive</span><span class="p">(</span><span class="n">erc</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">scenario</span><span class="p">)</span>
</span></code></pre></div>
<p>This helper method returns a FASTSim SimDrive object using the vehicle, drive cycle and scenario</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>erc</code> <em>fastsim.cycle.Cycle| List[Tuple[fastsim.cycle.Cycle, float</em> - FASTSim range cycle object or list of tuples of cycles</li>
<li><code>v</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object for analysis vehicle</li>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object for current selection</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>sim_drive</code> <em>fastsim.simdrive.SimDrive</em> - FASTSim SimDrive object</li>
</ul>
<p><a id="t3co.objectives.fueleconomy.get_mpgge"></a></p>
<h4 id="get_mpgge">get_mpgge<a class="headerlink" href="#get_mpgge" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="k">def</span> <span class="nf">get_mpgge</span><span class="p">(</span>
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>    <span class="n">eff_range_cyc</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="n">Cycle</span>
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a>    <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">fastsim</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="n">Cycle</span><span class="p">,</span> <span class="nb">float</span><span class="p">]],</span>
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a>    <span class="n">v</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a>    <span class="n">scenario</span><span class="p">,</span>
</span><span id="__span-58-6"><a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a>    <span class="n">diagnostic</span><span class="o">=</span><span class="kc">False</span>
</span><span id="__span-58-7"><a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">fastsim</span><span class="o">.</span><span class="n">simdrive</span><span class="o">.</span><span class="n">SimDrive</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]]</span>
</span></code></pre></div>
<p>This helper method gets the composite mpgge fuel efficiency of vehicle for each efficiency_range Drive Cycle and weight.
It runs the vehicle using efficiency range cycle(s) and returns mpgge based on the powertrain type</p>
<p>Method computes a composite mpgge from multiple drive cycles and weights for each cycle.
If the user passes in a single Drive Cycle rather than a list of tuples, the base case of
a composite mpgge from a single Drive Cycle and a single weight, 1, is computed.</p>
<p>Also updates the vehicle's corresponding scenario object</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>eff_range_cyc</code> <em>fastsim.cycle.Cycle | List[Tuple[fastsim.cycle.Cycle, float]]</em> - efficiency range cycle</li>
<li><code>v</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object for analysis vehicle</li>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object for current selection</li>
<li><code>diagnostic</code> <em>bool, optional</em> - if True, returns all mpgge dicts. Defaults to False.</li>
</ul>
<p><strong>Raises</strong>:</p>
<ul>
<li><code>ValueError</code> - unknown vehicle powertrain type</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>mpgge_comp</code> <em>dict</em> - Dictionary containing MPGGE breakdowns</li>
<li><code>sim_drives</code> <em>List[fastsim.simdrive.SimDrive]</em> - List of simdrives for charge depleting and charge sustaining cycles</li>
<li><code>mpgges</code> <em>List[dict], optional</em> - if diagnostic==True, returns additional</li>
</ul>
<p><a id="t3co.objectives.gradeability"></a></p>
<h1 id="t3coobjectivesgradeability">t3co.objectives.gradeability<a class="headerlink" href="#t3coobjectivesgradeability" title="Permanent link">&para;</a></h1>
<p><a id="t3co.objectives.gradeability.get_gradeability"></a></p>
<h4 id="get_gradeability">get_gradeability<a class="headerlink" href="#get_gradeability" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="k">def</span> <span class="nf">get_gradeability</span><span class="p">(</span>
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>    <span class="n">analysis_vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-59-3"><a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a>    <span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-59-4"><a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a>    <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-59-5"><a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a>    <span class="n">ess_init_soc</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-59-6"><a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a>    <span class="n">set_weight_to_max_kg</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-59-7"><a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">simdrive</span><span class="o">.</span><span class="n">SimDrive</span><span class="p">,</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">simdrive</span><span class="o">.</span><span class="n">SimDrive</span><span class="p">]</span>
</span></code></pre></div>
<p>This function runs SimDrives to determine the gradeability at given speed and the grade vehicle is
evaluated at how much it meets or exceeds target speed at the target grade.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>analysis_vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object for analysis vehicle</li>
<li><code>scenario</code> <em>run_scenario.Scenario, optional</em> - Scenario object for current selection. Defaults to None.</li>
<li><code>verbose</code> <em>bool, optional</em> - if True, prints process steps. Defaults to False.</li>
<li><code>ess_init_soc</code> <em>float, optional</em> - ESS Initial SOC override. Defaults to None.</li>
<li><code>set_weight_to_max_kg</code> <em>bool, optional</em> - if True, run_scenario.set_test_weight() overrides vehice weight to GVWR. Defaults to True.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>grade_6percent_mph_ach</code> <em>float</em> - Achieved speed on 6% grade test</li>
<li><code>grade_1pt25percent_mph_ach</code> <em>float</em> - Achieved speed on 1.25% grade test</li>
<li><code>grade_6_simdrive</code> <em>fastsim.simdrive.SimDrive</em> - FASTSim SimDrive for gradeability test of 6% grade</li>
<li><code>grade_1p25_simdrive</code> <em>fastsim.simdrive.SimDrive</em> - FASTSim SimDrive for gradeability test of 1.25% grade</li>
</ul>
<p><a id="t3co.objectives"></a></p>
<h1 id="t3coobjectives">t3co.objectives<a class="headerlink" href="#t3coobjectives" title="Permanent link">&para;</a></h1>
<p>Sub-package contaning modules that calculate optimization objectives.</p>
<p><a id="t3co.utilities.demo_inputs_installer"></a></p>
<h1 id="t3coutilitiesdemo_inputs_installer">t3co.utilities.demo_inputs_installer<a class="headerlink" href="#t3coutilitiesdemo_inputs_installer" title="Permanent link">&para;</a></h1>
<p><a id="t3co.utilities.demo_inputs_installer.main"></a></p>
<h4 id="main_1">main<a class="headerlink" href="#main_1" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="k">def</span> <span class="nf">main</span><span class="p">()</span>
</span></code></pre></div>
<p>This function requests user inputs for whether and where to copy T3CO demo input files from the t3co.resources folder. It then calls the copy_demo_input_files function.</p>
<p><a id="t3co.utilities.demo_inputs_installer.copy_demo_input_files"></a></p>
<h4 id="copy_demo_input_files">copy_demo_input_files<a class="headerlink" href="#copy_demo_input_files" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="k">def</span> <span class="nf">copy_demo_input_files</span><span class="p">(</span><span class="n">destination_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span>
</span></code></pre></div>
<p>This function copies the t3co.resources folder that includes demo input files to a user input destination_path.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>destination_path</code> <em>str | Path</em> - Path of destination directory for copying t3co.resources folder</li>
</ul>
<p><a id="t3co.sweep"></a></p>
<h1 id="t3cosweep">t3co.sweep<a class="headerlink" href="#t3cosweep" title="Permanent link">&para;</a></h1>
<p><a id="t3co.sweep.deug_traces"></a></p>
<h4 id="deug_traces">deug_traces<a class="headerlink" href="#deug_traces" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="k">def</span> <span class="nf">deug_traces</span><span class="p">(</span><span class="n">vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a>                <span class="n">cycles</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">fastsim</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="n">Cycle</span><span class="p">],</span>
</span><span id="__span-62-3"><a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a>                <span class="n">scenario</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This function gets a diagnostic trace of get_mpgge</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim Vehicle object</li>
<li><code>cycles</code> <em>List[fastsim.cycle.Cycle]</em> - List of FASTSim drivecycle objects</li>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - Scenario object</li>
</ul>
<p><a id="t3co.sweep.save_tco_files"></a></p>
<h4 id="save_tco_files">save_tco_files<a class="headerlink" href="#save_tco_files" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="k">def</span> <span class="nf">save_tco_files</span><span class="p">(</span><span class="n">tco_files</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">resdir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">scenario_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sel</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="__span-63-2"><a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a>                   <span class="n">ts</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This function saves the intermediary files as tsv</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>tco_files</code> <em>dict</em> - Contains all TCO calculation dataframes</li>
<li><code>resdir</code> <em>str</em> - result directory strong</li>
<li><code>scenario_name</code> <em>str</em> - scenario name</li>
<li><code>sel</code> <em>str</em> - selection(s)</li>
<li><code>ts</code> <em>str</em> - timestring</li>
</ul>
<p><a id="t3co.sweep.get_knobs_bounds_curves"></a></p>
<h4 id="get_knobs_bounds_curves">get_knobs_bounds_curves<a class="headerlink" href="#get_knobs_bounds_curves" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="k">def</span> <span class="nf">get_knobs_bounds_curves</span><span class="p">(</span><span class="n">selection</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">vpttype</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sdf</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a>                            <span class="n">lw_imp_curves</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="__span-64-3"><a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a>                            <span class="n">aero_drag_imp_curves</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="__span-64-4"><a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a>                            <span class="n">eng_eff_curves</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span>
</span></code></pre></div>
<p>This function fetches the knobs and constraints for running the optimization for a given selection</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>selection</code> <em>int</em> - selection number</li>
<li><code>vpttype</code> <em>str</em> - vehicle powertrain type = veh_pt_type</li>
<li><code>sdf</code> <em>pd.DataFrame</em> - scenario dataframe</li>
<li><code>lw_imp_curves</code> <em>pd.DataFrame</em> - light weighting curve dataframe</li>
<li><code>aero_drag_imp_curves</code> <em>pd.DataFrame</em> - aero drag curve dataframe</li>
<li><code>eng_eff_curves</code> <em>pd.DataFrame</em> - engine efficiency curve dataframe</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>knobs_bounds</code> <em>dict</em> - dict of knobs and bounds</li>
<li><code>curves</code> <em>dict</em> - dict of lw, aero, and engine efficiency curve parameters</li>
</ul>
<p><a id="t3co.sweep.get_objectives_constraints"></a></p>
<h4 id="get_objectives_constraints">get_objectives_constraints<a class="headerlink" href="#get_objectives_constraints" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="k">def</span> <span class="nf">get_objectives_constraints</span><span class="p">(</span><span class="n">selection</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a>                               <span class="n">sdf</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="__span-65-3"><a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a>                               <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">list</span><span class="p">]</span>
</span></code></pre></div>
<p>This function appends to list of necessary variables based on the constraints and objectives selected</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>selection</code> <em>int</em> - selection number</li>
<li><code>sdf</code> <em>DataFrame</em> - scenario dataframe</li>
<li><code>verbose</code> <em>bool, optional</em> - if selected, function will print objectives and constraints. Defaults to True.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>objectives</code> <em>list</em> - list of selected objective variables</li>
<li><code>constraints</code> <em>list</em> - list of selected constraint variables</li>
</ul>
<p><a id="t3co.sweep.run_moo"></a></p>
<h4 id="run_moo">run_moo<a class="headerlink" href="#run_moo" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a><span class="k">def</span> <span class="nf">run_moo</span><span class="p">(</span>
</span><span id="__span-66-2"><a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a>        <span class="n">sel</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">sdf</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">optpt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">algo</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">skip_opt</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="__span-66-3"><a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a>        <span class="n">pop_size</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">n_max_gen</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">n_last</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">nth_gen</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="__span-66-4"><a id="__codelineno-66-4" name="__codelineno-66-4" href="#__codelineno-66-4"></a>        <span class="n">x_tol</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">f_tol</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">resdir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="__span-66-5"><a id="__codelineno-66-5" name="__codelineno-66-5" href="#__codelineno-66-5"></a>        <span class="n">lw_imp_curves_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">aero_drag_imp_curves_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="__span-66-6"><a id="__codelineno-66-6" name="__codelineno-66-6" href="#__codelineno-66-6"></a>        <span class="n">eng_eff_imp_curves_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-66-7"><a id="__codelineno-66-7" name="__codelineno-66-7" href="#__codelineno-66-7"></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">pymoo</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">Result</span><span class="p">,</span> <span class="n">moo</span><span class="o">.</span><span class="n">T3COProblem</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span>
</span></code></pre></div>
<p>This function calls get_objectives_constraints and get_knobs_bounds_curves, and then calls run_optimization to perform the multiobjective optimization</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>sel</code> <em>int</em> - selection number</li>
<li><code>sdf</code> <em>DataFrame</em> - Scenario dataframe</li>
<li><code>optpt</code> <em>str</em> - FASTSim vehicle powertrain type</li>
<li><code>algo</code> <em>str</em> - algorithm name</li>
<li><code>skip_opt</code> <em>bool</em> - skip optimization boolean</li>
<li><code>pop_size</code> <em>int</em> - population size for optimization</li>
<li><code>n_max_gen</code> <em>int</em> - maximum number of generations for optimization</li>
<li><code>n_last</code> <em>int</em> - number of generations to look back for termination</li>
<li><code>nth_gen</code> <em>int</em> - number of generations to evaluate if convergence occurs</li>
<li><code>x_tol</code> <em>float</em> - tolerance in parameter space</li>
<li><code>verbose</code> <em>book</em> - if selected, function prints the optimization process</li>
<li><code>f_tol</code> <em>float</em> - tolerance in objective space</li>
<li><code>resdir</code> <em>str</em> - results directory</li>
<li><code>lw_imp_curves_df</code> <em>DataFrame</em> - light weighting curves dataframe</li>
<li><code>aero_drag_imp_curves_df</code> <em>DataFrame</em> - aero drag curves dataframe</li>
<li><code>eng_eff_imp_curves_df</code> <em>DataFrame</em> - engine efficiency curve dataframe</li>
<li><code>config</code> <em>Config</em> - Config class object</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>moo_results</code> <em>pymoo.core.result.Result</em> - optimization results object</li>
<li><code>moo_problem</code> <em>T3COProblem</em> - minimization problem that calculates TCO</li>
<li><code>moo_code</code> <em>bool</em> - Error message</li>
</ul>
<p><a id="t3co.sweep.check_input_files"></a></p>
<h4 id="check_input_files">check_input_files<a class="headerlink" href="#check_input_files" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="k">def</span> <span class="nf">check_input_files</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">filetype</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This function contains assert statements that make sure input vehicle and scenario dataframes do not contain numm rows</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>df</code> <em>DataFrame</em> - vehicle or scenario dataframe</li>
<li><code>filetype</code> <em>str</em> - 'vehicle' or 'scenario'</li>
<li><code>filepath</code> <em>str</em> - filepath of the vehicle or scenario input files</li>
</ul>
<p><a id="t3co.sweep.skip_scenario"></a></p>
<h4 id="skip_scenario">skip_scenario<a class="headerlink" href="#skip_scenario" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a><span class="k">def</span> <span class="nf">skip_scenario</span><span class="p">(</span><span class="n">sel</span><span class="p">,</span>
</span><span id="__span-68-2"><a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a>                  <span class="n">selections</span><span class="p">,</span>
</span><span id="__span-68-3"><a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a>                  <span class="n">scenario_name</span><span class="p">,</span>
</span><span id="__span-68-4"><a id="__codelineno-68-4" name="__codelineno-68-4" href="#__codelineno-68-4"></a>                  <span class="n">report_kwargs</span><span class="p">,</span>
</span><span id="__span-68-5"><a id="__codelineno-68-5" name="__codelineno-68-5" href="#__codelineno-68-5"></a>                  <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span>
</span></code></pre></div>
<p>This function checks if given selection is present in exclude or look_for selections</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>sel</code> <em>float</em> - <em>description</em></li>
<li><code>scenario_name</code> <em>str</em> - scenario name</li>
<li><code>verbose</code> <em>bool, optional</em> - if selected, prints out scenarios that are skipped. Defaults to False.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>bool</code> - if not present, returns True; Else False</li>
</ul>
<p><a id="t3co.sweep.optimize"></a></p>
<h4 id="optimize">optimize<a class="headerlink" href="#optimize" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a><span class="k">def</span> <span class="nf">optimize</span><span class="p">(</span><span class="n">sel</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-69-2"><a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a>             <span class="n">sdf</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="__span-69-3"><a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a>             <span class="n">vdf</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="__span-69-4"><a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a>             <span class="n">algo</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="__span-69-5"><a id="__codelineno-69-5" name="__codelineno-69-5" href="#__codelineno-69-5"></a>             <span class="n">report_kwargs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="__span-69-6"><a id="__codelineno-69-6" name="__codelineno-69-6" href="#__codelineno-69-6"></a>             <span class="n">REPORT_COLS</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="__span-69-7"><a id="__codelineno-69-7" name="__codelineno-69-7" href="#__codelineno-69-7"></a>             <span class="n">skip_opt</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="__span-69-8"><a id="__codelineno-69-8" name="__codelineno-69-8" href="#__codelineno-69-8"></a>             <span class="n">config</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Config</span><span class="p">,</span>
</span><span id="__span-69-9"><a id="__codelineno-69-9" name="__codelineno-69-9" href="#__codelineno-69-9"></a>             <span class="n">write_tsv</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span>
</span></code></pre></div>
<p>This function runs the optimization for a given selection if skip_opt = False</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>sel</code> <em>float</em> - Selection number</li>
<li><code>sdf</code> <em>pd.DataFrame</em> - Dataframe of input scenario file</li>
<li><code>vdf</code> <em>pd.DataFrame</em> - Dataframe of input vehicle file</li>
<li><code>algo</code> <em>str</em> - Multiobjective optimization Algorithm name</li>
<li><code>report_kwargs</code> <em>dict</em> - arguments related to running T3CO</li>
<li><code>REPORT_COLS</code> <em>dict</em> - Results columns dictionary for sorting the T3CO results</li>
<li><code>skip_opt</code> <em>bool</em> - skip optimization. If true, then optimizer is not run.</li>
<li><code>config</code> <em>run_scenario.Config</em> - Config object</li>
<li><code>write_tsv</code> <em>bool, optional</em> - if selected, intermediary dataframes are saved as tsv files.. Defaults to False.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>report_i</code> <em>dict</em> - Dictionary of T3CO results for given selection</li>
</ul>
<p><a id="t3co.sweep.run_vehicle_scenarios"></a></p>
<h4 id="run_vehicle_scenarios">run_vehicle_scenarios<a class="headerlink" href="#run_vehicle_scenarios" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a><span class="k">def</span> <span class="nf">run_vehicle_scenarios</span><span class="p">(</span>
</span><span id="__span-70-2"><a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a>    <span class="n">config</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Config</span><span class="p">,</span> <span class="n">REPORT_COLS</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="__span-70-3"><a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span><span class="p">],</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span>
</span></code></pre></div>
<p>This function reads the input files, validates inputs, compiles the selections, and returns a clean set of inputs that are needed for the current analysis.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>config</code> <em>Config</em> - Config object containing analysis attributes and scenario attribute overrides</li>
<li><code>REPORT_COLS</code> <em>dict</em> - Dictionary of reporting columns from T3CO</li>
</ul>
<p><strong>Raises</strong>:</p>
<ul>
<li><code>Exception</code> - input validation error</li>
<li><code>Exception</code> - optimization error</li>
</ul>
<p><strong>Returns</strong>:</p>
<p>selections, vdf, sdf, skip_all_opt, report_kwargs, REPORT_COLS (Tuple[List[int|str], pd.DataFrame, pd.DataFrame, bool, dict, dict]): Selections list, vehicle dataframe, scenario dataframe, skip all optimization, report arguments, and report columns</p>
<p><a id="t3co.sweep.run_optimize_analysis"></a></p>
<h4 id="run_optimize_analysis">run_optimize_analysis<a class="headerlink" href="#run_optimize_analysis" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a><span class="k">def</span> <span class="nf">run_optimize_analysis</span><span class="p">(</span><span class="n">sel</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">vdf</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">sdf</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="__span-71-2"><a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a>                          <span class="n">skip_all_opt</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">run_scenario</span><span class="o">.</span><span class="n">Config</span><span class="p">,</span>
</span><span id="__span-71-3"><a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a>                          <span class="n">report_kwargs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">REPORT_COLS</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span>
</span></code></pre></div>
<p>This function runs the optimization function based on skip_all_opt input to return the report_i dictionary with T3CO results for each selection.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>sel</code> <em>str | int</em> - selection number</li>
<li><code>vdf</code> <em>pd.DataFrame</em> - Dataframe of input vehicle file</li>
<li><code>sdf</code> <em>pd.DataFrame</em> - Dataframe of input scenario file</li>
<li><code>skip_all_opt</code> <em>bool</em> - Skip all optimization. If true, then the optimizer is not run for any scenario</li>
<li><code>config</code> <em>run_scenario.Config</em> - Config object</li>
<li><code>report_kwargs</code> <em>dict</em> - Dictionary of args required for running T3CO</li>
<li><code>REPORT_COLS</code> <em>dict</em> - Dictionary of reporting columns from T3CO</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>report_i</code> <em>dict</em> - Dictionary of T3CO results for given selection</li>
</ul>
<p><a id="t3co.run.Global"></a></p>
<h1 id="t3corunglobal">t3co.run.Global<a class="headerlink" href="#t3corunglobal" title="Permanent link">&para;</a></h1>
<p>Global constants
Stores paths to directories used for input files, as well as constants referenced throughout the code base</p>
<p><a id="t3co.run.Global.DieselGalPerGasGal"></a></p>
<h4 id="dieselgalpergasgal">DieselGalPerGasGal<a class="headerlink" href="#dieselgalpergasgal" title="Permanent link">&para;</a></h4>
<p>energy equivalent gallons of diesel per 1 gallon gas</p>
<p><a id="t3co.run.Global.kgH2_per_gge"></a></p>
<h4 id="kgh2_per_gge">kgH2_per_gge<a class="headerlink" href="#kgh2_per_gge" title="Permanent link">&para;</a></h4>
<p>https://epact.energy.gov/fuel-conversion-factors for Hydrogen</p>
<p><a id="t3co.run.Global.mps_to_mph"></a></p>
<h4 id="mps_to_mph">mps_to_mph<a class="headerlink" href="#mps_to_mph" title="Permanent link">&para;</a></h4>
<p>1 mps = 2.23694 mph</p>
<p><a id="t3co.run.Global.m_to_mi"></a></p>
<h4 id="m_to_mi">m_to_mi<a class="headerlink" href="#m_to_mi" title="Permanent link">&para;</a></h4>
<p>1 m = 0.000621371 mi</p>
<p><a id="t3co.run.Global.get_kwh_per_gge"></a></p>
<h4 id="get_kwh_per_gge">get_kwh_per_gge<a class="headerlink" href="#get_kwh_per_gge" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a><span class="k">def</span> <span class="nf">get_kwh_per_gge</span><span class="p">()</span>
</span></code></pre></div>
<p>This is a getter for kwh_per_gge, sim and scenario dependant var that can change
important to get from one location each time so we can track when and how it's used</p>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>kwh_per_gge</code> <em>float</em> - kWh per Gasoline Gallon Equivalent</li>
</ul>
<p><a id="t3co.run.Global.set_tco_intermediates"></a></p>
<h4 id="set_tco_intermediates">set_tco_intermediates<a class="headerlink" href="#set_tco_intermediates" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a><span class="k">def</span> <span class="nf">set_tco_intermediates</span><span class="p">()</span>
</span></code></pre></div>
<p>This function sets path for TCO_INTERMEDIATES to save tsv files</p>
<p><a id="t3co.run.Global.set_tco_results"></a></p>
<h4 id="set_tco_results">set_tco_results<a class="headerlink" href="#set_tco_results" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a><span class="k">def</span> <span class="nf">set_tco_results</span><span class="p">()</span>
</span></code></pre></div>
<p>This function sets path for TCO_RESULTS</p>
<p><a id="t3co.run.Global.kg_to_lbs"></a></p>
<h4 id="kg_to_lbs">kg_to_lbs<a class="headerlink" href="#kg_to_lbs" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-75-1"><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a><span class="k">def</span> <span class="nf">kg_to_lbs</span><span class="p">(</span><span class="n">kgs</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span>
</span></code></pre></div>
<p>This function converts kg to lb</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>kgs</code> <em>float</em> - mass in kg</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>(float)</code> - mass in pounds</li>
</ul>
<p><a id="t3co.run.Global.lbs_to_kgs"></a></p>
<h4 id="lbs_to_kgs">lbs_to_kgs<a class="headerlink" href="#lbs_to_kgs" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-76-1"><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a><span class="k">def</span> <span class="nf">lbs_to_kgs</span><span class="p">(</span><span class="n">lbs</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span>
</span></code></pre></div>
<p>This function converts lb to kg</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>lbs</code> <em>float</em> - mass in pounds</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>(float)</code> - mass in kg</li>
</ul>
<p><a id="t3co.run.Global.not_falsy"></a></p>
<h4 id="not_falsy">not_falsy<a class="headerlink" href="#not_falsy" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-77-1"><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a><span class="k">def</span> <span class="nf">not_falsy</span><span class="p">(</span><span class="n">var</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span>
</span></code></pre></div>
<p>This function returns True to verify that var is NOT falsy: not in [None, np.nan, 0, False]</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>var</code> <em>float</em> - variable to check</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>(bool)</code> - True if not in [None, 0, False]</li>
</ul>
<p><a id="t3co.run"></a></p>
<h1 id="t3corun">t3co.run<a class="headerlink" href="#t3corun" title="Permanent link">&para;</a></h1>
<p><a id="t3co.run.generateinputs"></a></p>
<h1 id="t3corungenerateinputs">t3co.run.generateinputs<a class="headerlink" href="#t3corungenerateinputs" title="Permanent link">&para;</a></h1>
<p><a id="t3co.run.generateinputs.generate"></a></p>
<h4 id="generate">generate<a class="headerlink" href="#generate" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-78-1"><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a><span class="k">def</span> <span class="nf">generate</span><span class="p">(</span><span class="n">vocation</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">dst</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">gl</span><span class="o">.</span><span class="n">OPTIMIZATION_AND_TCO_RCRS</span><span class="p">)</span>
</span></code></pre></div>
<p>This function aggregates specifications from users for powertrains, desired ranges, component costs etc. into two
csv files - FASTSimInputs and OtherInputs</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>vocation</code> <em>str</em> - Vocation type description</li>
<li><code>dst</code> <em>str, optional</em> - results directory file path. Defaults to gl.OPTIMIZATION_AND_TCO_RCRS.</li>
</ul>
<p><a id="t3co.run.run_scenario"></a></p>
<h1 id="t3corunrun_scenario">t3co.run.run_scenario<a class="headerlink" href="#t3corunrun_scenario" title="Permanent link">&para;</a></h1>
<p>Module for loading vehicles, scenarios, running them and managing them</p>
<p><a id="t3co.run.run_scenario.Config"></a></p>
<h2 id="config-objects">Config Objects<a class="headerlink" href="#config-objects" title="Permanent link">&para;</a></h2>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-79-1"><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a><span class="nd">@dataclass</span>
</span><span id="__span-79-2"><a id="__codelineno-79-2" name="__codelineno-79-2" href="#__codelineno-79-2"></a><span class="k">class</span> <span class="nc">Config</span><span class="p">()</span>
</span></code></pre></div>
<p>This class reads T3COConfig.csv file containing analysis attributes like vehicle and scenario paths, TCO_method, and scenario attribute overrides.</p>
<p><a id="t3co.run.run_scenario.Config.from_file"></a></p>
<h4 id="from_file_1">from_file<a class="headerlink" href="#from_file_1" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-80-1"><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a><span class="k">def</span> <span class="nf">from_file</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">analysis_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span>
</span></code></pre></div>
<p>This method generates a Config dictionary from CSV file and calls Config.from_dict</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>filename</code> <em>str</em> - path of input T3CO Config file</li>
<li><code>analysis_id</code> <em>int</em> - analysis ID selections</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>Self.from_dict</code> - method that gets Config instance from config_dict</li>
</ul>
<p><a id="t3co.run.run_scenario.Config.from_dict"></a></p>
<h4 id="from_dict">from_dict<a class="headerlink" href="#from_dict" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-81-1"><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a><span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="n">config_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span>
</span></code></pre></div>
<p>This method generates a Config instance from config_dict</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>config_dict</code> <em>dict</em> - dictionary containing fields from T3CO Config input CSV file</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>Self</code> - Config instance containining all values from T3CO Config CSV file</li>
</ul>
<p><a id="t3co.run.run_scenario.Config.validate_analysis_id"></a></p>
<h4 id="validate_analysis_id">validate_analysis_id<a class="headerlink" href="#validate_analysis_id" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-82-1"><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a><span class="k">def</span> <span class="nf">validate_analysis_id</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">analysis_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span>
</span></code></pre></div>
<p>This method validates that correct analysis id is input</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>filename</code> <em>str</em> - T3CO Config input CSV file path</li>
</ul>
<p><strong>Raises</strong>:</p>
<ul>
<li><code>Exception</code> - Error if analysis_id not found</li>
</ul>
<p><a id="t3co.run.run_scenario.Config.check_drivecycles_and_create_selections"></a></p>
<h4 id="check_drivecycles_and_create_selections">check_drivecycles_and_create_selections<a class="headerlink" href="#check_drivecycles_and_create_selections" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-83-1"><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a><span class="k">def</span> <span class="nf">check_drivecycles_and_create_selections</span><span class="p">(</span><span class="n">config_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">)</span>
</span></code></pre></div>
<p>This method checks if the config.drive_cycle input is a file or a folder. If a folder is provided, then it creates a list of all selections for each drivecycle in the folders as config.dc_files</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>config_file</code> <em>str|Path</em> - File path of config file</li>
</ul>
<p><a id="t3co.run.run_scenario.Scenario"></a></p>
<h2 id="scenario-objects">Scenario Objects<a class="headerlink" href="#scenario-objects" title="Permanent link">&para;</a></h2>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-84-1"><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a><span class="nd">@dataclass</span>
</span><span id="__span-84-2"><a id="__codelineno-84-2" name="__codelineno-84-2" href="#__codelineno-84-2"></a><span class="k">class</span> <span class="nc">Scenario</span><span class="p">()</span>
</span></code></pre></div>
<p>Class object that contains all TCO parameters and performance target (range, grade, accel) information         for a vehicle such that performance and TCO can be computed during optimization</p>
<p><a id="t3co.run.run_scenario.Scenario.originalcargo_kg"></a></p>
<h4 id="originalcargo_kg">originalcargo_kg<a class="headerlink" href="#originalcargo_kg" title="Permanent link">&para;</a></h4>
<p>if needed, should be assigned immediately after vehicle read in</p>
<p><a id="t3co.run.run_scenario.Scenario.plf_scenario_vehicle_cargo_capacity_kg"></a></p>
<h4 id="plf_scenario_vehicle_cargo_capacity_kg">plf_scenario_vehicle_cargo_capacity_kg<a class="headerlink" href="#plf_scenario_vehicle_cargo_capacity_kg" title="Permanent link">&para;</a></h4>
<p>includes cargo credit kg</p>
<p><a id="t3co.run.run_scenario.Scenario.from_config"></a></p>
<h4 id="from_config">from_config<a class="headerlink" href="#from_config" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-85-1"><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a><span class="k">def</span> <span class="nf">from_config</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">Config</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This method overrides certain scenario fields if use_config is True and config object is not None</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>config</code> <em>Config, optional</em> - Config object. Defaults to None.</li>
</ul>
<p><a id="t3co.run.run_scenario.check_phev_init_socs"></a></p>
<h4 id="check_phev_init_socs">check_phev_init_socs<a class="headerlink" href="#check_phev_init_socs" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-86-1"><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a><span class="k">def</span> <span class="nf">check_phev_init_socs</span><span class="p">(</span><span class="n">a_vehicle</span><span class="p">:</span> <span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-86-2"><a id="__codelineno-86-2" name="__codelineno-86-2" href="#__codelineno-86-2"></a>                         <span class="n">scenario</span><span class="p">:</span> <span class="n">Scenario</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This function checks that soc_norm_init_for_grade_pct and soc_norm_init_for_accel_pct are present only for PHEVs</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>a_vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object</li>
<li><code>scenario</code> <em>Scenario</em> - T3CO scenario object</li>
</ul>
<p><a id="t3co.run.run_scenario.get_phev_util_factor"></a></p>
<h4 id="get_phev_util_factor">get_phev_util_factor<a class="headerlink" href="#get_phev_util_factor" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-87-1"><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a><span class="k">def</span> <span class="nf">get_phev_util_factor</span><span class="p">(</span><span class="n">scenario</span><span class="p">:</span> <span class="n">Scenario</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-87-2"><a id="__codelineno-87-2" name="__codelineno-87-2" href="#__codelineno-87-2"></a>                         <span class="n">mpgge</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span>
</span></code></pre></div>
<p>This function gets the PHEV utility factor derived from the computed range of the
vehicle and the operational day range computed from shifts per year and the first vmt year</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>scenario</code> <em>Scenario</em> - T3CO scenario object</li>
<li><code>v</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object</li>
<li><code>mpgge</code> <em>dict</em> - Miles per Gallon Gasoline Equivalent dictionary</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>uf</code> <em>float</em> - PHEV computed utility factor</li>
</ul>
<p><a id="t3co.run.run_scenario.get_objective_simdrive"></a></p>
<h4 id="get_objective_simdrive">get_objective_simdrive<a class="headerlink" href="#get_objective_simdrive" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-88-1"><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a><span class="k">def</span> <span class="nf">get_objective_simdrive</span><span class="p">(</span>
</span><span id="__span-88-2"><a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a>        <span class="n">analysis_vehicle</span><span class="p">:</span> <span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-88-3"><a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a>        <span class="n">cycle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="n">Cycle</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">simdrive</span><span class="o">.</span><span class="n">SimDrive</span>
</span></code></pre></div>
<p>This function obtains the SimDrive for accel and grade test</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>analysis_vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object</li>
<li><code>cycle</code> <em>fastsim.cycle.Cycle</em> - FASTSim Cycle object</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>sd</code> <em>fastsim.simdrive.SimDrive</em> - FASTSim SimDrive object containing vehicle inputs and simulation output attributes</li>
</ul>
<p><a id="t3co.run.run_scenario.run_grade_or_accel"></a></p>
<h4 id="run_grade_or_accel">run_grade_or_accel<a class="headerlink" href="#run_grade_or_accel" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-89-1"><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a><span class="k">def</span> <span class="nf">run_grade_or_accel</span><span class="p">(</span><span class="n">test</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">analysis_vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-89-2"><a id="__codelineno-89-2" name="__codelineno-89-2" href="#__codelineno-89-2"></a>                       <span class="n">sim_drive</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">simdrive</span><span class="o">.</span><span class="n">SimDrive</span><span class="p">,</span>
</span><span id="__span-89-3"><a id="__codelineno-89-3" name="__codelineno-89-3" href="#__codelineno-89-3"></a>                       <span class="n">ess_init_soc</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This function handles initial SOC considerations for grade and accel tests</p>
<p>If ess_init_soc override is passed, use that
Else if the vehicle is an HEV, use the standard HEV init SOC values for accel and grade
Else, let FASTSim determine init SOC in sim_drive()
BEVs use max_soc
PHEVs use max_soc
Conv init_soc doesn't matter
HEVs attempt SOC balancing but that is overrident by HEV test init SOC</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>test</code> <em>str</em> - 'accel' or 'grade' test</li>
<li><code>analysis_vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object</li>
<li><code>sim_drive</code> <em>fastsim.simdrive.SimDrive</em> - FASTSim SimDrive object</li>
<li><code>ess_init_soc</code> <em>float</em> - ESS initial state of charge (SOC)</li>
</ul>
<p><strong>Raises</strong>:</p>
<ul>
<li><code>Exception</code> - if test not in ['accel', 'grade']</li>
</ul>
<p><a id="t3co.run.run_scenario.create_fastsim_vehicle"></a></p>
<h4 id="create_fastsim_vehicle">create_fastsim_vehicle<a class="headerlink" href="#create_fastsim_vehicle" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-90-1"><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a><span class="k">def</span> <span class="nf">create_fastsim_vehicle</span><span class="p">(</span><span class="n">veh_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span>
</span></code></pre></div>
<p>This function creates and returns an empty FASTSim vehicle object with no attributes or</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>veh_dict</code> <em>dict, optional</em> - Vehicle attributes dict. Defaults to None.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>v</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object</li>
</ul>
<p><a id="t3co.run.run_scenario.get_vehicle"></a></p>
<h4 id="get_vehicle">get_vehicle<a class="headerlink" href="#get_vehicle" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-91-1"><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a><span class="k">def</span> <span class="nf">get_vehicle</span><span class="p">(</span><span class="n">veh_no</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">veh_input_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span>
</span></code></pre></div>
<p>This function loads vehicle object from vehicle number and input csv filepath</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>veh_no</code> <em>int</em> - vehicle selection number</li>
<li><code>veh_input_path</code> <em>str</em> - vehicle model assumptions input CSV file path</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>veh</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object</li>
</ul>
<p><a id="t3co.run.run_scenario.get_scenario_and_cycle"></a></p>
<h4 id="get_scenario_and_cycle">get_scenario_and_cycle<a class="headerlink" href="#get_scenario_and_cycle" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-92-1"><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a><span class="k">def</span> <span class="nf">get_scenario_and_cycle</span><span class="p">(</span>
</span><span id="__span-92-2"><a id="__codelineno-92-2" name="__codelineno-92-2" href="#__codelineno-92-2"></a>        <span class="n">veh_no</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="__span-92-3"><a id="__codelineno-92-3" name="__codelineno-92-3" href="#__codelineno-92-3"></a>        <span class="n">scenario_inputs_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="__span-92-4"><a id="__codelineno-92-4" name="__codelineno-92-4" href="#__codelineno-92-4"></a>        <span class="n">a_vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-92-5"><a id="__codelineno-92-5" name="__codelineno-92-5" href="#__codelineno-92-5"></a>        <span class="n">config</span><span class="p">:</span> <span class="n">Config</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-92-6"><a id="__codelineno-92-6" name="__codelineno-92-6" href="#__codelineno-92-6"></a>        <span class="n">do_input_validation</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-92-7"><a id="__codelineno-92-7" name="__codelineno-92-7" href="#__codelineno-92-7"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Scenario</span><span class="p">,</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="n">Cycle</span><span class="p">]</span>
</span></code></pre></div>
<p>This function uses helper methods load_scenario and load_design_cycle_from_scenario         to get scenario object and cycle object corresponding to selected vehicle (by veh_no)</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>veh_no</code> <em>int</em> - vehicle selection number</li>
<li><code>scenario_inputs_path</code> <em>str</em> - input file path for scenario assumptions CSV</li>
<li><code>a_vehicle</code> <em>fastsim.vehicle.Vehicle, optional</em> - FASTSim vehicle object for given selection. Defaults to None.</li>
<li><code>config</code> <em>Config, optional</em> - Config object for current analysis. Defaults to None.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>scenario</code> <em>Scenario</em> - T3CO scenario object selected</li>
<li><code>cyc</code> <em>fastsim.cycle.Cycle</em> - FASTSim cycle object selected</li>
</ul>
<p><a id="t3co.run.run_scenario.load_scenario"></a></p>
<h4 id="load_scenario">load_scenario<a class="headerlink" href="#load_scenario" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-93-1"><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a><span class="k">def</span> <span class="nf">load_scenario</span><span class="p">(</span><span class="n">veh_no</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="__span-93-2"><a id="__codelineno-93-2" name="__codelineno-93-2" href="#__codelineno-93-2"></a>                  <span class="n">scenario_inputs_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="__span-93-3"><a id="__codelineno-93-3" name="__codelineno-93-3" href="#__codelineno-93-3"></a>                  <span class="n">a_vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-93-4"><a id="__codelineno-93-4" name="__codelineno-93-4" href="#__codelineno-93-4"></a>                  <span class="n">config</span><span class="p">:</span> <span class="n">Config</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Scenario</span>
</span></code></pre></div>
<p>This function gets the Scenario object from scenario input CSV filepath, initializes some fields,          and overrides some fields based on Config object</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>veh_no</code> <em>int</em> - vehicle selection number</li>
<li><code>scenario_inputs_path</code> <em>str</em> - input file path for scenario assumptions CSV</li>
<li><code>a_vehicle</code> <em>fastsim.vehicle.Vehicle, optional</em> - FASTSim vehicle object for given selection. Defaults to None.</li>
<li><code>config</code> <em>Config, optional</em> - Config object for current analysis. Defaults to None.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>scenario</code> <em>Scenario</em> - Scenario object for given selection</li>
</ul>
<p><a id="t3co.run.run_scenario.load_design_cycle_from_scenario"></a></p>
<h4 id="load_design_cycle_from_scenario">load_design_cycle_from_scenario<a class="headerlink" href="#load_design_cycle_from_scenario" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-94-1"><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a><span class="k">def</span> <span class="nf">load_design_cycle_from_scenario</span><span class="p">(</span>
</span><span id="__span-94-2"><a id="__codelineno-94-2" name="__codelineno-94-2" href="#__codelineno-94-2"></a>        <span class="n">scenario</span><span class="p">:</span> <span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-94-3"><a id="__codelineno-94-3" name="__codelineno-94-3" href="#__codelineno-94-3"></a>        <span class="n">config</span><span class="p">:</span> <span class="n">Config</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-94-4"><a id="__codelineno-94-4" name="__codelineno-94-4" href="#__codelineno-94-4"></a>        <span class="n">cyc_file_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">gl</span><span class="o">.</span><span class="n">OPTIMIZATION_DRIVE_CYCLES</span><span class="p">,</span>
</span><span id="__span-94-5"><a id="__codelineno-94-5" name="__codelineno-94-5" href="#__codelineno-94-5"></a>        <span class="n">do_input_validation</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="n">Cycle</span>
</span></code></pre></div>
<p>This helper method loads the design cycle used for mpgge and range determination.
It can also be used standalone to get cycles not in standard gl.OPTIMIZATION_DRIVE_CYCLES location,
but still needs cycle name from scenario object, carried in scenario.drive_cycle.
If the drive cycles are a list of tuples, handle accordingly with eval.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>scenario</code> <em>Scenario</em> - Scenario object for current selection</li>
<li><code>cyc_file_path</code> <em>str, optional</em> - drivecycle input file path. Defaults to gl.OPTIMIZATION_DRIVE_CYCLES.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>range_cyc</code> <em>fastsim.cycle.Cycle</em> - FASTSim cycle object for current Scenario object</li>
</ul>
<p><a id="t3co.run.run_scenario.load_design_cycle_from_path"></a></p>
<h4 id="load_design_cycle_from_path">load_design_cycle_from_path<a class="headerlink" href="#load_design_cycle_from_path" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-95-1"><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a><span class="k">def</span> <span class="nf">load_design_cycle_from_path</span><span class="p">(</span><span class="n">cyc_file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">cycle</span><span class="o">.</span><span class="n">Cycle</span>
</span></code></pre></div>
<p>This helper method loads the Cycle object from the drivecycle filepath</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>cyc_file_path</code> <em>str</em> - drivecycle input file path</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>range_cyc</code> <em>fastsim.cycle.Cycle</em> - FASTSim cycle object for current Scenario object</li>
</ul>
<p><a id="t3co.run.run_scenario.set_test_weight"></a></p>
<h4 id="set_test_weight">set_test_weight<a class="headerlink" href="#set_test_weight" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-96-1"><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a><span class="k">def</span> <span class="nf">set_test_weight</span><span class="p">(</span><span class="n">vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-96-2"><a id="__codelineno-96-2" name="__codelineno-96-2" href="#__codelineno-96-2"></a>                    <span class="n">scenario</span><span class="p">:</span> <span class="n">Scenario</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>assign standardized vehicle mass for accel and grade test using GVWR and GVWR Credit</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object</li>
<li><code>scenario</code> <em>t3co.run_scenario.Scenario</em> - T3CO scenario object</li>
</ul>
<p><a id="t3co.run.run_scenario.reset_vehicle_weight"></a></p>
<h4 id="reset_vehicle_weight">reset_vehicle_weight<a class="headerlink" href="#reset_vehicle_weight" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-97-1"><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a><span class="k">def</span> <span class="nf">reset_vehicle_weight</span><span class="p">(</span><span class="n">vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This function resets vehicle mass after loaded weight tests are done for accel and grade</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object</li>
</ul>
<p><a id="t3co.run.run_scenario.limit_cargo_kg_for_moo_hev_bev"></a></p>
<h4 id="limit_cargo_kg_for_moo_hev_bev">limit_cargo_kg_for_moo_hev_bev<a class="headerlink" href="#limit_cargo_kg_for_moo_hev_bev" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-98-1"><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a><span class="k">def</span> <span class="nf">limit_cargo_kg_for_moo_hev_bev</span><span class="p">(</span>
</span><span id="__span-98-2"><a id="__codelineno-98-2" name="__codelineno-98-2" href="#__codelineno-98-2"></a>        <span class="n">opt_scenario</span><span class="p">:</span> <span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-98-3"><a id="__codelineno-98-3" name="__codelineno-98-3" href="#__codelineno-98-3"></a>        <span class="n">mooadvancedvehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This helper method is used within T3COProblem to assign limited cargo capacity based on GVWR + GVWRCredit and optimization vehicle mass for advanced vehicles</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>opt_scenario</code> <em>t3co.run_scenario.Scenario</em> - T3CO scenario object</li>
<li><code>mooadvancedvehicle</code> <em>fastsim.vehicle.Vehicle</em> - pymoo optimization vehicle</li>
</ul>
<p><a id="t3co.run.run_scenario.set_max_motor_kw"></a></p>
<h4 id="set_max_motor_kw">set_max_motor_kw<a class="headerlink" href="#set_max_motor_kw" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-99-1"><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a><span class="k">def</span> <span class="nf">set_max_motor_kw</span><span class="p">(</span><span class="n">analysis_vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-99-2"><a id="__codelineno-99-2" name="__codelineno-99-2" href="#__codelineno-99-2"></a>                     <span class="n">scenario</span><span class="p">:</span> <span class="n">Scenario</span><span class="p">,</span> <span class="n">max_motor_kw</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This helper method is used within T3COProblem to set max_motor_kw to optimization vehicle and set kw_demand_fc_on if PHEV</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>analysis_vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object</li>
<li><code>scenario</code> <em>run_scenario.Scenario</em> - T3CO Scenarion object</li>
<li><code>max_motor_kw</code> <em>float</em> - max motor power /kW</li>
</ul>
<p><a id="t3co.run.run_scenario.set_max_battery_kwh"></a></p>
<h4 id="set_max_battery_kwh">set_max_battery_kwh<a class="headerlink" href="#set_max_battery_kwh" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-100-1"><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a><span class="k">def</span> <span class="nf">set_max_battery_kwh</span><span class="p">(</span><span class="n">analysis_vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-100-2"><a id="__codelineno-100-2" name="__codelineno-100-2" href="#__codelineno-100-2"></a>                        <span class="n">max_ess_kwh</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This helper method is used within T3COProblem to set max_ess_kwh to optimization vehicle</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>analysis_vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object</li>
<li><code>max_ess_kwh</code> <em>float</em> - max energy storage system energy capacity /kWh</li>
</ul>
<p><a id="t3co.run.run_scenario.set_max_battery_power_kw"></a></p>
<h4 id="set_max_battery_power_kw">set_max_battery_power_kw<a class="headerlink" href="#set_max_battery_power_kw" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-101-1"><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a><span class="k">def</span> <span class="nf">set_max_battery_power_kw</span><span class="p">(</span><span class="n">analysis_vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-101-2"><a id="__codelineno-101-2" name="__codelineno-101-2" href="#__codelineno-101-2"></a>                             <span class="n">max_ess_kw</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This helper method is used within T3COProblem to set max_ess_kwx to optimization vehicle</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>analysis_vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object</li>
<li><code>max_ess_kw</code> <em>float</em> - max energy storage system power /kW</li>
</ul>
<p><a id="t3co.run.run_scenario.set_max_fuel_converter_kw"></a></p>
<h4 id="set_max_fuel_converter_kw">set_max_fuel_converter_kw<a class="headerlink" href="#set_max_fuel_converter_kw" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-102-1"><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a><span class="k">def</span> <span class="nf">set_max_fuel_converter_kw</span><span class="p">(</span><span class="n">analysis_vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-102-2"><a id="__codelineno-102-2" name="__codelineno-102-2" href="#__codelineno-102-2"></a>                              <span class="n">fc_max_out_kw</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This helper method is used within T3COProblem to set fc_max_out_kw to optimization vehicle</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>analysis_vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object</li>
<li><code>fc_max_out_kw</code> <em>float</em> - max fuel converter power /kW</li>
</ul>
<p><a id="t3co.run.run_scenario.set_fuel_store_kwh"></a></p>
<h4 id="set_fuel_store_kwh">set_fuel_store_kwh<a class="headerlink" href="#set_fuel_store_kwh" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-103-1"><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a><span class="k">def</span> <span class="nf">set_fuel_store_kwh</span><span class="p">(</span><span class="n">analysis_vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-103-2"><a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a>                       <span class="n">fs_kwh</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>
<p>This helper method is used within T3COProblem to set fs_kwh to optimization vehicle</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>analysis_vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object</li>
<li><code>fs_kwh</code> <em>float</em> - fuel storage energy capacity /kWh</li>
</ul>
<p><a id="t3co.run.run_scenario.set_cargo_kg"></a></p>
<h4 id="set_cargo_kg">set_cargo_kg<a class="headerlink" href="#set_cargo_kg" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-104-1"><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a><span class="k">def</span> <span class="nf">set_cargo_kg</span><span class="p">(</span><span class="n">analysis_vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span> <span class="n">cargo_kg</span><span class="p">)</span>
</span></code></pre></div>
<p>This helper method is used within T3COProblem to set cargo_kg to optimization vehicle</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>analysis_vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object</li>
<li><code>cargo_kg</code> <em>float</em> - vehicle cargo capacity /kg</li>
</ul>
<p><a id="t3co.run.run_scenario.vehicle_scenario_sweep"></a></p>
<h4 id="vehicle_scenario_sweep">vehicle_scenario_sweep<a class="headerlink" href="#vehicle_scenario_sweep" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-105-1"><a id="__codelineno-105-1" name="__codelineno-105-1" href="#__codelineno-105-1"></a><span class="k">def</span> <span class="nf">vehicle_scenario_sweep</span><span class="p">(</span><span class="n">vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span>
</span><span id="__span-105-2"><a id="__codelineno-105-2" name="__codelineno-105-2" href="#__codelineno-105-2"></a>                           <span class="n">scenario</span><span class="p">:</span> <span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-105-3"><a id="__codelineno-105-3" name="__codelineno-105-3" href="#__codelineno-105-3"></a>                           <span class="n">range_cyc</span><span class="p">,</span>
</span><span id="__span-105-4"><a id="__codelineno-105-4" name="__codelineno-105-4" href="#__codelineno-105-4"></a>                           <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="__span-105-5"><a id="__codelineno-105-5" name="__codelineno-105-5" href="#__codelineno-105-5"></a>                           <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></code></pre></div>
<p>This function contains helper methods such as get_tco_of_vehicle, check_phev_init_socs, get_accel, and get_gradeability    and returns a dictionary of all TCO related outputs</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object for current selection</li>
<li><code>scenario</code> <em>Scenario</em> - Scenario object for current selection</li>
<li><code>range_cyc</code> <em>fastsim.cycle.Cycle</em> - FASTSim cycle object for current scenario</li>
<li><code>verbose</code> <em>bool, optional</em> - if selected, prints out the TCO calculation process. Defaults to False.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>out</code> <em>dict</em> - output dictionary containing TCO elements</li>
</ul>
<p><a id="t3co.run.run_scenario.run"></a></p>
<h4 id="run">run<a class="headerlink" href="#run" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-106-1"><a id="__codelineno-106-1" name="__codelineno-106-1" href="#__codelineno-106-1"></a><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">veh_no</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="__span-106-2"><a id="__codelineno-106-2" name="__codelineno-106-2" href="#__codelineno-106-2"></a>        <span class="n">vocation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;blank&quot;</span><span class="p">,</span>
</span><span id="__span-106-3"><a id="__codelineno-106-3" name="__codelineno-106-3" href="#__codelineno-106-3"></a>        <span class="n">vehicle_input_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">gl</span><span class="o">.</span><span class="n">FASTSIM_INPUTS</span><span class="p">,</span>
</span><span id="__span-106-4"><a id="__codelineno-106-4" name="__codelineno-106-4" href="#__codelineno-106-4"></a>        <span class="n">scenario_inputs_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">gl</span><span class="o">.</span><span class="n">OTHER_INPUTS</span><span class="p">)</span>
</span></code></pre></div>
<p>This function runs vehicle_scenario_sweep based on vehicle and scenario objects read from input file paths</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>veh_no</code> <em>int</em> - vehicle selection number</li>
<li><code>vocation</code> <em>str, optional</em> - vocation description of selected vehicle. Defaults to "blank".</li>
<li><code>vehicle_input_path</code> <em>str, optional</em> - input file path for vehicle assumptions CSV. Defaults to gl.FASTSIM_INPUTS.</li>
<li><code>scenario_inputs_path</code> <em>str, optional</em> - input file path for scenario assumptions CSV. Defaults to gl.OTHER_INPUTS.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>out</code> <em>dict</em> - output dictionary containing TCO results</li>
</ul>
<p><a id="t3co.run.run_scenario.rerun"></a></p>
<h4 id="rerun">rerun<a class="headerlink" href="#rerun" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><span class="filename">Python</span><pre><span></span><code><span id="__span-107-1"><a id="__codelineno-107-1" name="__codelineno-107-1" href="#__codelineno-107-1"></a><span class="k">def</span> <span class="nf">rerun</span><span class="p">(</span><span class="n">vehicle</span><span class="p">:</span> <span class="n">fastsim</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">Vehicle</span><span class="p">,</span> <span class="n">vocation</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">scenario</span><span class="p">:</span> <span class="n">Scenario</span><span class="p">,</span>
</span><span id="__span-107-2"><a id="__codelineno-107-2" name="__codelineno-107-2" href="#__codelineno-107-2"></a>          <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">)</span>
</span></code></pre></div>
<p>This function runs vehicle_scenario_sweep when given the vehicle and scenario objects</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>vehicle</code> <em>fastsim.vehicle.Vehicle</em> - FASTSim vehicle object</li>
<li><code>vocation</code> <em>str</em> - vocation description</li>
<li><code>scenario</code> <em>Scenario</em> - Scenario object</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>out</code> <em>dict</em> - output dictionary containing TCO outputs</li>
</ul>
<p><a id="t3co.demos.opp_cost_demo"></a></p>
<h1 id="t3codemosopp_cost_demo">t3co.demos.opp_cost_demo<a class="headerlink" href="#t3codemosopp_cost_demo" title="Permanent link">&para;</a></h1>
<p><a id="t3co.demos.hev_sweep_and_moo"></a></p>
<h1 id="t3codemoshev_sweep_and_moo">t3co.demos.hev_sweep_and_moo<a class="headerlink" href="#t3codemoshev_sweep_and_moo" title="Permanent link">&para;</a></h1>
<p><a id="t3co.demos.hev_sweep_and_moo.vnum"></a></p>
<h4 id="vnum">vnum<a class="headerlink" href="#vnum" title="Permanent link">&para;</a></h4>
<p><a id="t3co.demos.example_load_and_run"></a></p>
<h1 id="t3codemosexample_load_and_run">t3co.demos.example_load_and_run<a class="headerlink" href="#t3codemosexample_load_and_run" title="Permanent link">&para;</a></h1>
<p>To run this as a script that drives all the t3co files as a module:
The working directory for this script should be at the same depth as the t3co/ module.
Thus the scripts (run_scenario.py, etc.) will have a parent package and you won't get relative import errors.
ex: run_one.<strong>name</strong> will be "t3co.run_one"</p>
<p>First step, generateinputs.generate(vocation)
Create the files necessary such that run_scenario.run() can read information for Vehicle and Scenario object
instantiation.</p>
<p>tldr:
generateinputs(vocation) -&gt; gl.FASTSIM_INPUTS, gl.OTHER_INPUTS -&gt; run_scenario.run(gl.FASTSIM_INPUTS, gl.OTHER_INPUTS)</p>
<p>Generate Inputs (GI) first retrieves specific user generated information necessary to create
two final product files used for TCO and optimization: gl.FASTSIM_INPUTS &amp; gl.OTHER_INPUTS.</p>
<p>(GI) gets the user generated information via the specified vocation and the following files:
"t3co/resources/vehicles/{vocation}/specifications/BaselineVehicle.csv"
"...OptimizerInitializationValues.csv"
"...PowertrainTechTargets.csv"
"...VocationRequirements.csv"</p>
<p>Note: the folder {vocation} must exist and be populated by the user beforehand.</p>
<p>gl.FASTSIM_INPUTS &amp; gl.OTHER_INPUTS are populated and stored in the default global locations that
run_scenario.run() uses as default params - implying run() can use other FASTSIM_INPUTS &amp; OTHER_INPUTS files
if desired.</p>
<p>Content of gl.FASTSIM_INPUTS and gl.OTHER_INPUTS:</p>
<p>gl.FASTSIM_INPUTS content:</p>
<h1 id="standard-fastsim-input-file-header-and-rows">standard FASTSim input file header and rows<a class="headerlink" href="#standard-fastsim-input-file-header-and-rows" title="Permanent link">&para;</a></h1>
<p>selection,scenario_name,veh_pt_type,drag_coef,frontalAreaM2,glid...
1.0,"Conv 2020 tech,  750 mi range",1.0,0.546,10.18,11776.0,0...
2.0,"Conv 2025 tech,  750 mi range",1.0,0.5026666670000001,10...
3.0,"Conv 2030 tech,  750 mi range",1.0,0.473125,10.18,11776....
4.0,"Conv 2035 tech,  750 mi range",1.0,0.46,10.18,11776.0,0....</p>
<p>gl.OTHER_INPUTS content:</p>
<h1 id="all-information-necessary-to-determine-vehicle-tco-as-well-as-performance-targets">all information necessary to determine vehicle TCO as well as performance targets<a class="headerlink" href="#all-information-necessary-to-determine-vehicle-tco-as-well-as-performance-targets" title="Permanent link">&para;</a></h1>
<p>selection,drive_cycle,vmt_reduct_per_yr,vmt,constant_trip_distance_mi,vehicle_life_yr,...,region,target_range_mi,min_speed_at_6pct_grade_in_5min_mph,min_speed_at_1p25pct_grade_in_5min_mph,max0to60secAtGV
1.0,long_haul_cyc.csv,0.0,"[100000, 100000, 100000, 100000, 100000, 100000...United States,750.0,30.0,65.0,80.0,20.0
2.0,long_haul_cyc.csv,,"[100000, 100000, 100000, 100000, 100000, 100000, 1...United States,750.0,30.0,65.0,80.0,20.0
3.0,long_haul_cyc.csv,,"[100000, 100000, 100000, 100000, 100000, 100000, 1...United States,750.0,30.0,65.0,80.0,20.0
4.0,long_haul_cyc.csv,,"[100000, 100000, 100000, 100000, 100000, 100000, 1...United States,750.0,30.0,65.0,80.0,20.0
5.0,long_haul_cyc.csv,,"[100000, 100000, 100000, 100000, 100000, 100000, 1...United States,750.0,30.0,65.0,80.0,20.0</p>
<p>default values for these files generated by generateinputs():
gl.FASTSIM_INPUTS: ./t3co/resources/"FASTSimInputs.csv"
gl.OTHER_INPUTS:   ./t3co/resources/"OtherInputs.csv"</p>
<p>These files are populated in generateinputs.generate()
FASTSimInputsDf.to_csv(dst/gl.FASTSIM_INPUTS_FILE, index=False)
OtherInputsDf.to_csv(dst/gl.OTHER_INPUTS_FILE, index=False)</p>
<p>where
gl.FASTSIM_INPUTS_FILE = "FASTSimInputs.csv"
gl.OTHER_INPUTS = "OtherInputs.csv"
and
dst is usually ./t3co/resources</p>
<p>run() usage:
run_scenario.run(veh_no, vocation, vehicle_input_path=gl.FASTSIM_INPUTS,
scenario_inputs_path=gl.OTHER_INPUTS,</p>
<blockquote>
<blockquote>
<blockquote>
<p>print('running', <strong>name</strong>)
generateinputs.generate('Class8_long_haul')
use_jit = False
start = time.time()
res1 = run_scenario.run(1, 'Class8_long_haul', use_jit=use_jit)
print(f'classic time [s] {time.time()-start} | use jit? {use_jit}')</p>
</blockquote>
</blockquote>
</blockquote>
<p><a id="t3co.demos.t2co_opt_benchmark"></a></p>
<h1 id="t3codemost2co_opt_benchmark">t3co.demos.t2co_opt_benchmark<a class="headerlink" href="#t3codemost2co_opt_benchmark" title="Permanent link">&para;</a></h1>
<p><a id="t3co.demos.visualization_demo"></a></p>
<h1 id="t3codemosvisualization_demo">t3co.demos.visualization_demo<a class="headerlink" href="#t3codemosvisualization_demo" title="Permanent link">&para;</a></h1>
<p><a id="t3co.demos.Spencer"></a></p>
<h1 id="t3codemosspencer">t3co.demos.Spencer<a class="headerlink" href="#t3codemosspencer" title="Permanent link">&para;</a></h1>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["search.highlight", "content.action.view", "search.suggest", "content.code.copy", "navigation.path", "content.tooltips"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>